"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[611],{73689:function(e,n,t){t.d(n,{a:function(){return useSelectionReducer}});var i=t(58467),r=t(2784),reducer=function(e,n){var t=new Set(Array.from(e.checkedIds));switch(n.type){case"toggle-one":var r=n.payload,o=r.checked,s=r.id;return o?t.add(s):t.delete(s),{lastCheckedId:s,checkedIds:t};case"toggle-slice":var a=n.payload,c=a.checked,l=a.id,u=a.allIds,d=e.lastCheckedId,h=d?u.indexOf(d):-1,p=u.indexOf(l);if(-1===h||-1===p)return e;var x=(0,i._)([h,p].sort(),2),m=x[0],f=x[1];return u.slice(m,f+1).forEach(function(e){c?t.add(e):t.delete(e)}),{lastCheckedId:l,checkedIds:t};case"toggle-all":var g=n.payload,j=g.checked,v=g.allIds;return{lastCheckedId:null,checkedIds:j?new Set(v):new Set}}},o={checkedIds:new Set,lastCheckedId:null};function useSelectionReducer(e){var n=(0,i._)(r.useReducer(reducer,o),2),t=n[0],s=n[1];return[t,{onToggleFactory:function(n){return function(i){var r=i.checked;i.shiftKey&&t.lastCheckedId?s({type:"toggle-slice",payload:{checked:r,id:n,allIds:e}}):s({type:"toggle-one",payload:{checked:r,id:n}})}},onToggleAll:function(n){s({type:"toggle-all",payload:{checked:n,allIds:e}})}}]}},39222:function(e,n,t){t.d(n,{f:function(){return h}});var i=t(52322),r=t(18399),o=t(57830),s=t(2784),a=t(47933),c=t(13032),l=t(49422),u=t(38153),d=t(84495),h=s.memo(function(e){var n=e.repoAddress,t=e.tags,o=e.onAddTag;return(0,i.jsx)(r.x,{flex:{direction:"column",alignItems:"flex-start"},children:(0,i.jsx)(CreatedByTag,{repoAddress:n,tags:t,onAddTag:o})})}),pluckTagFromList=function(e){var n=!0,t=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;switch(s.key){case d.H.User:return{type:"user",tag:s};case d.H.ScheduleName:return{type:"schedule",tag:s};case d.H.SensorName:return{type:"sensor",tag:s};case d.H.Automaterialize:return{type:"auto-materialize",tag:s};case d.H.CreatedBy:if("auto_materialize"===s.value)return{type:"auto-materialize",tag:s};continue;case d.H.AutoObserve:return{type:"auto-observe",tag:s}}}}catch(e){t=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw i}}return{type:"manual"}},CreatedByTag=function(e){var n=e.repoAddress,t=e.tags,r=e.onAddTag,s=(0,c.C)().UserDisplay,d=pluckTagFromList(t);if("manual"===d.type)return(0,i.jsx)(o.V,{icon:"account_circle",children:"Manually launched"});var h=function(){var e=d.type,t=d.tag,r=t.value;switch(e){case"user":return(0,i.jsx)(s,{email:t.value});case"schedule":return(0,i.jsx)(o.V,{icon:"schedule",children:n?(0,i.jsx)(a.rU,{to:(0,u.$U)(n,"/schedules/".concat(r)),children:r}):r});case"sensor":return(0,i.jsx)(o.V,{icon:"sensors",children:n?(0,i.jsx)(a.rU,{to:(0,u.$U)(n,"/sensors/".concat(r)),children:r}):r});case"auto-materialize":return(0,i.jsx)(o.V,{icon:"auto_materialize_policy",children:"Auto-materialize policy"});case"auto-observe":return(0,i.jsx)(o.V,{icon:"auto_observe",children:"Auto-observation"})}}();if(!r)return h;var p=d.tag,x=p.key,m=p.value;return(0,i.jsx)(l.c,{data:p,actions:[{label:"Add to filter",onClick:function(){return r({token:"tag",value:"".concat(x,"=").concat(m)})}}],children:h})}},46253:function(e,n,t){t.d(n,{ZZ:function(){return ew},AL:function(){return RunTable}});var i,r,o=t(85333),s=t(6692),a=t(58467),c=t(73235),l=t(82550),u=t(52322),d=t(60138),h=t(18399),p=t(92364),x=t(34e3),m=t(54266),f=t(82585),g=t(81308),j=t(57830),v=t(86412),b=t(12084),y=t(10952),_=t(9001),w=t(2784),C=t(35505),k=t(37783);function _templateObject(){var e=(0,c._)(["\n  pointer-events: all;\n  background: ",";\n  border-radius: 4px;\n  padding: 16px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.12);\n\n  &,\n  button {\n    &,\n    &:hover,\n    &:focus {\n      color: ",";\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,c._)(["\n  > *:not(:first-child) {\n    &,\n    &:hover,\n    &:focus {\n      border: none;\n      box-shadow: none;\n    }\n  }\n  > * {\n    &:hover,\n    &:focus {\n      opacity: 0.9;\n    }\n  }\n"]);return _templateObject1=function(){return e},e}(i=r||(r={})).TOP_LEFT="top-start",i.TOP_CENTER="top",i.TOP_RIGHT="top-end",i.BOTTOM_LEFT="bottom-start",i.BOTTOM_CENTER="bottom",i.BOTTOM_RIGHT="bottom-end";var ProductTour=function(e){var n=e.title,t=e.description,i=e.actions,r=e.position,o=e.children,s=e.img,a=e.video,c=e.object,l=e.width,d=w.useMemo(function(){return s?(0,u.jsx)("img",{src:s,style:{borderRadius:"6px"}}):a?(0,u.jsx)("video",{src:a,style:{borderRadius:"6px"},autoPlay:!0,loop:!0,muted:!0}):c},[s,a,c]),p=w.useMemo(function(){return(0,u.jsxs)(R,{flex:{gap:6,direction:"row"},margin:{top:8},children:[(null==i?void 0:i.next)?(0,u.jsx)(_.zx,{onClick:i.next,children:"Next"}):null,(null==i?void 0:i.dismiss)?(0,u.jsx)(_.zx,{onClick:i.dismiss,children:"Dismiss"}):null]})},[null==i?void 0:i.next,null==i?void 0:i.dismiss]);return(0,u.jsx)(k.J,{isOpen:!0,placement:r,modifiers:{arrow:{enabled:!0},preventOverflow:{enabled:!0}},minimal:!1,content:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{}),(0,u.jsxs)(T,{flex:{direction:"column",gap:4},padding:16,style:{width:void 0===l?"260px":l},children:[(0,u.jsxs)(h.x,{flex:{direction:"column",gap:8},children:[d,(0,u.jsx)(g.pm,{style:{fontSize:"16px"},children:n})]}),(0,u.jsx)("div",{children:t}),p]}),(0,u.jsx)("div",{})]}),children:o})},T=(0,C.ZP)(h.x).withConfig({componentId:"sc-798bc76a-0"})(_templateObject(),v.w.Gray900,v.w.White),R=(0,C.ZP)(h.x).withConfig({componentId:"sc-798bc76a-1"})(_templateObject1()),O=t(47933),I=t(39126),S=t(35157),P=t(73689),N=t(15282),A=t(90818),E=t(16148),z=t(37160),D=t(26997),L=t(38153),M=t(51892),F=t(39222),B=t(81862),H=t(87612),U=t(22970),Z=t(83601),J=t(44678),q=t(43180),V=t(94092),K=t(34263),G=t(19211),Q=t(54949),Y=t(47544),$=t(61935),W=t(17791),X=t(88286),ee=t(5035),en=t(51969),et=t(16530),ei=t(33379),er=t(38058),eo=t(59692),es=t(66213),ea=t(38917),refineToError=function(e){if((null==e?void 0:e.launchPipelineReexecution.__typename)==="LaunchRunSuccess")throw Error("Not an error!");return null==e?void 0:e.launchPipelineReexecution},errorText=function(e){if(!e)return"Unknown error";switch(e.__typename){case"ConflictingExecutionParamsError":return"Conflicting execution parameters";case"InvalidOutputError":return"Invalid output";case"InvalidStepError":return"Invalid step";case"NoModeProvidedError":return"No mode provided";case"PipelineNotFoundError":return"Job not found in workspace";case"PresetNotFoundError":return"Preset not found";case"PythonError":return e.message;case"RunConfigValidationInvalid":return"Run config invalid";case"RunConflict":return"Run conflict";case"UnauthorizedError":return"Re-execution not authorized";case"InvalidSubsetError":return"Invalid op subset: "+e.message;default:return"Unknown error"}},initializeState=function(e){return{frozenRuns:e,step:"initial",reexecution:{completed:0,errors:{}}}},reexecutionDialogReducer=function(e,n){switch(n.type){case"reset":return initializeState(n.frozenRuns);case"start":return(0,s._)((0,o._)({},e),{step:"reexecuting"});case"reexecution-success":var t=e.reexecution;return(0,s._)((0,o._)({},e),{step:"reexecuting",reexecution:(0,s._)((0,o._)({},t),{completed:t.completed+1})});case"reexecution-error":var i=e.reexecution;return(0,s._)((0,o._)({},e),{step:"reexecuting",reexecution:(0,s._)((0,o._)({},i),{completed:i.completed+1,errors:(0,s._)((0,o._)({},i.errors),(0,H._)({},n.id,n.error))})});case"complete":return(0,s._)((0,o._)({},e),{step:"completed"})}},ReexecutionDialog=function(e){var n,t=e.isOpen,i=e.onClose,r=e.onComplete,o=e.reexecutionStrategy,s=e.selectedRuns,c=w.useRef(s),l=(0,a._)(w.useReducer(reexecutionDialogReducer,c.current,initializeState),2),d=l[0],h=l[1],p=Object.keys(d.frozenRuns).length;w.useEffect(function(){t&&h({type:"reset",frozenRuns:c.current})},[t]),w.useEffect(function(){t||(c.current=s)},[t,s]);var m=(0,a._)((0,ei.D)(ea.kO),1)[0],f=(n=(0,B._)(function(){var e,n,t,i,s,a,c,l,u;return(0,U.Jh)(this,function(p){switch(p.label){case 0:h({type:"start"}),e=Object.keys(d.frozenRuns),n=!0,t=!1,i=void 0,p.label=1;case 1:p.trys.push([1,6,7,8]),s=e[Symbol.iterator](),p.label=2;case 2:if(n=(a=s.next()).done)return[3,5];return[4,m({variables:{reexecutionParams:{parentRunId:c=a.value,strategy:o}}})];case 3:(null==(l=p.sent().data)?void 0:l.launchPipelineReexecution.__typename)==="LaunchRunSuccess"?h({type:"reexecution-success"}):h({type:"reexecution-error",id:c,error:refineToError(l)}),p.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return u=p.sent(),t=!0,i=u,[3,8];case 7:try{n||null==s.return||s.return()}finally{if(t)throw i}return[7];case 8:return h({type:"complete"}),r(d.reexecution),[2]}})}),function(){return n.apply(this,arguments)}),j="reexecuting"!==d.step;return(0,u.jsxs)(y.Vq,{isOpen:t,title:o===$.hmq.ALL_STEPS?"Re-execute runs":"Re-execute runs from failure",canEscapeKeyClose:j,canOutsideClickClose:j,onClose:i,children:[(0,u.jsx)(y.a7,{children:(0,u.jsxs)(eo.Z,{direction:"column",spacing:24,children:[function(){switch(d.step){case"initial":if(!p)return(0,u.jsxs)(eo.Z,{direction:"column",spacing:16,children:[(0,u.jsx)("div",{children:"No runs selected for re-execution."}),(0,u.jsx)("div",{children:"The runs you selected may already have finished executing."})]});return(0,u.jsx)(eo.Z,{direction:"column",spacing:16,children:(0,u.jsx)("div",{children:o===$.hmq.ALL_STEPS?(0,u.jsxs)("span",{children:["".concat(p," ").concat(1===p?"run":"runs"," will be re-executed "),(0,u.jsx)("strong",{children:"with all steps"}),". Do you wish to continue?"]}):(0,u.jsxs)("span",{children:["".concat(p," ").concat(1===p?"run":"runs"," will be re-executed "),(0,u.jsx)("strong",{children:"from failure"}),". Do you wish to continue?"]})})});case"reexecuting":case"completed":var e=p>0?d.reexecution.completed/p:1;return(0,u.jsxs)(eo.Z,{direction:"column",spacing:8,children:[(0,u.jsx)(er.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"reexecuting"===d.step?(0,u.jsx)(es.c,{message:"Re-execution in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===d.step)return null;if("reexecuting"===d.step)return(0,u.jsx)("div",{children:"Please do not close the window or navigate away during re-execution."});var e=d.reexecution.errors,n=Object.keys(e).length,t=d.reexecution.completed-n;return(0,u.jsxs)(eo.Z,{direction:"column",spacing:8,children:[t?(0,u.jsxs)(eo.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,u.jsx)(x.JO,{name:"check_circle",color:v.w.Green500}),(0,u.jsx)("div",{children:"Successfully requested re-execution for ".concat(t," ").concat(1===t?"run":"runs",".")})]}):null,n?(0,u.jsxs)(eo.Z,{direction:"column",spacing:8,children:[(0,u.jsxs)(eo.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,u.jsx)(x.JO,{name:"warning",color:v.w.Yellow500}),(0,u.jsx)("div",{children:"Could not request re-execution for ".concat(n," ").concat(1===n?"run":"runs",":")})]}),(0,u.jsx)("ul",{children:Object.keys(e).map(function(n){return(0,u.jsx)("li",{children:(0,u.jsxs)(eo.Z,{direction:"row",spacing:8,alignItems:"baseline",children:[(0,u.jsx)(g.fv,{children:n.slice(0,8)}),e[n]?(0,u.jsx)("div",{children:errorText(e[n])}):null]})},n)})})]}):null]})}()]})}),(0,u.jsx)(y.cN,{children:function(){switch(d.step){case"initial":if(!p)return(0,u.jsx)(_.zx,{intent:"none",onClick:i,children:"OK"});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(_.zx,{intent:"none",onClick:i,children:"Cancel"}),(0,u.jsx)(_.zx,{intent:"primary",onClick:f,children:"Re-execute ".concat("".concat(p," ").concat(1===p?"run":"runs"))})]});case"reexecuting":return(0,u.jsx)(_.zx,{intent:"primary",disabled:!0,children:"Re-executing ".concat("".concat(p," ").concat(1===p?"run":"runs","..."))});case"completed":return(0,u.jsx)(_.zx,{intent:"primary",onClick:i,children:"Done"})}}()})]})},ec=t(6315),el=t(85893),eu=t(16322),ed=t(49985),eh=t(94370);function RunActionsMenu_templateObject(){var e=(0,c._)(["\n  query PipelineEnvironmentQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        pipelineName\n        pipelineSnapshotId\n        runConfigYaml\n        pipelineName\n        parentPipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n  }\n"]);return RunActionsMenu_templateObject=function(){return e},e}function RunActionsMenu_templateObject1(){var e=(0,c._)(["\n  border-radius: 4px;\n  padding: 0px 6px;\n  background: ",";\n  color: ",";\n"]);return RunActionsMenu_templateObject1=function(){return e},e}function _templateObject2(){var e=(0,c._)(["\n  text-decoration: none !important;\n"]);return _templateObject2=function(){return e},e}var ep=w.memo(function(e){var n,t=e.run,i=e.onAddTag,r=e.additionalActionsForRun,c=w.useContext(ea.Lw).refetch,l=(0,a._)(w.useState("none"),2),d=l[0],p=l[1],m=w.useContext(K.I).rootServerURI,f=(0,Y.m)(),g=(0,eh.D)({onCompleted:c}),j=(0,a._)((0,Z.t)(ef,{variables:{runId:t.id}}),2),v=j[0],b=j[1],C=b.called,T=b.loading,R=b.data,closeDialogs=function(){p("none")},onComplete=function(){c()},O=(null==R?void 0:null===(n=R.pipelineRunOrError)||void 0===n?void 0:n.__typename)==="Run"?null==R?void 0:R.pipelineRunOrError:null,I=null==O?void 0:O.runConfigYaml,S=(0,D.n)(O),P=(0,ed.J)((0,s._)((0,o._)({},t),{parentPipelineSnapshotId:null==O?void 0:O.parentPipelineSnapshotId})),N=ec.cv.has(t.status),A=!!(S&&(0,en.E8)(null==S?void 0:S.match,t.pipelineName)),z=!!C&&!T,M=w.useMemo(function(){return t.hasReExecutePermission?P?{disabled:P.disabled,message:P.tooltip}:z?{disabled:!1}:{disabled:!0}:{disabled:!0,message:Q.Qr}},[t.hasReExecutePermission,P,z]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(_.zH,{children:[(0,u.jsx)(E.A,{to:"/runs/".concat(t.id),children:"View run"}),(0,u.jsx)(k.J,{content:(0,u.jsxs)(J.v2,{children:[(0,u.jsx)(J.sN,{tagName:"button",style:{minWidth:200},text:T?"Loading configuration...":"View configuration...",disabled:!I,icon:"open_in_new",onClick:function(){return p("config")}}),(0,u.jsx)(J.sN,{tagName:"button",text:(0,u.jsxs)("div",{style:{display:"contents"},children:["View all tags",(0,u.jsx)(h.x,{flex:{justifyContent:"center",alignItems:"center",display:"inline-flex"},padding:{horizontal:8},children:(0,u.jsx)(eg,{children:"t"})})]}),icon:"tag",onClick:function(){return p("tags")}}),t.pipelineSnapshotId?(0,u.jsx)(ej,{to:(0,X.sS)(t.pipelineName,t.pipelineSnapshotId),children:(0,u.jsx)(J.sN,{tagName:"button",icon:"job",text:"View snapshot",onClick:function(){return p("tags")}})}):null,(0,u.jsx)(J.R,{}),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(q.u,{content:t.hasReExecutePermission?em:W.U,position:"left",disabled:z&&t.hasReExecutePermission,targetTagName:"div",children:(0,u.jsx)(ee.U,{text:"Open in Launchpad...",disabled:!z||!t.hasReExecutePermission,icon:"edit",to:(0,L.$O)({id:t.id,pipelineName:t.pipelineName,repositoryName:null==S?void 0:S.match.repository.name,repositoryLocationName:null==S?void 0:S.match.repositoryLocation.name,isJob:A})})}),(0,u.jsx)(q.u,{content:M.message||"",position:"left",canShow:M.disabled,targetTagName:"div",children:(0,u.jsx)(J.sN,{tagName:"button",text:"Re-execute",disabled:M.disabled,icon:"refresh",onClick:(0,B._)(function(){return(0,U.Jh)(this,function(e){switch(e.label){case 0:return[4,g(t,$.hmq.ALL_STEPS)];case 1:return e.sent(),[2]}})})})}),N||!t.hasTerminatePermission?null:(0,u.jsx)(J.sN,{tagName:"button",icon:"cancel",text:"Terminate",onClick:function(){return p("terminate")}}),null==r?void 0:r(t),(0,u.jsx)(J.R,{})]}),(0,u.jsx)(J.AL,{text:"Download debug file",icon:"download_for_offline",download:!0,href:"".concat(m,"/download_debug/").concat(t.id)}),t.hasDeletePermission?(0,u.jsx)(J.sN,{tagName:"button",icon:"delete",text:"Delete",intent:"danger",onClick:function(){return p("delete")}}):null]}),position:"bottom-right",onOpening:function(){C||v()},children:(0,u.jsx)(_.zx,{icon:(0,u.jsx)(x.JO,{name:"expand_more"})})})]}),t.hasTerminatePermission?(0,u.jsx)(eu.A,{isOpen:"terminate"===d,onClose:closeDialogs,onComplete:onComplete,selectedRuns:(0,H._)({},t.id,t.canTerminate)}):null,t.hasDeletePermission?(0,u.jsx)(et.N,{isOpen:"delete"===d,onClose:closeDialogs,onComplete:onComplete,onTerminateInstead:function(){return p("terminate")},selectedRuns:(0,H._)({},t.id,t.canTerminate)}):null,(0,u.jsxs)(y.Vq,{isOpen:"tags"===d,title:"Tags",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:closeDialogs,children:[(0,u.jsx)(y.a7,{children:(0,u.jsx)(el.Q,{tags:t.tags,mode:A?"default"!==t.mode?t.mode:null:t.mode,onAddTag:i})}),(0,u.jsx)(y.cN,{topBorder:!0,children:(0,u.jsx)(_.zx,{intent:"primary",onClick:closeDialogs,children:"Close"})})]}),(0,u.jsxs)(y.Vq,{isOpen:"config"===d,title:"Config",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:closeDialogs,children:[(0,u.jsx)(V.u,{value:I||"",options:{readOnly:!0,lineNumbers:!0,mode:"yaml"}}),(0,u.jsxs)(y.cN,{topBorder:!0,children:[(0,u.jsx)(_.zx,{intent:"none",onClick:(0,B._)(function(){return(0,U.Jh)(this,function(e){switch(e.label){case 0:return f(I||""),[4,(0,G.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"})];case 1:return e.sent(),[2]}})}),children:"Copy config"}),(0,u.jsx)(_.zx,{intent:"primary",onClick:closeDialogs,children:"OK"})]})]})]})}),ex=w.memo(function(e){var n=e.selected,t=e.clearSelection,i=w.useContext(ea.Lw).refetch,r=(0,a._)(w.useState("none"),2),c=r[0],l=r[1],d=w.useMemo(function(){return n.some(function(e){return e.hasTerminatePermission})},[n]),h=w.useMemo(function(){return n.some(function(e){return e.hasTerminatePermission})},[n]),p=w.useMemo(function(){return n.some(function(e){return e.hasReExecutePermission})},[n]),m=!d&&!h,f=n.filter(function(e){return!ec.cv.has(null==e?void 0:e.status)&&e.hasTerminatePermission}),g=f.map(function(e){return e.id}),j=f.reduce(function(e,n){return(0,s._)((0,o._)({},e),(0,H._)({},n.id,n.canTerminate))},{}),v=n.map(function(e){return e.id}),b=n.reduce(function(e,n){return(0,s._)((0,o._)({},e),(0,H._)({},n.id,n.canTerminate))},{}),y=n.filter(function(e){return ec.hd.has(null==e?void 0:e.status)&&e.hasReExecutePermission}),C=y.reduce(function(e,n){return(0,s._)((0,o._)({},e),(0,H._)({},n.id,n.id))},{}),T=n.filter(function(e){return ec.cv.has(null==e?void 0:e.status)&&e.hasReExecutePermission}),R=T.reduce(function(e,n){return(0,s._)((0,o._)({},e),(0,H._)({},n.id,n.id))},{}),closeDialogs=function(){l("none")},onComplete=function(){t(),i()};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(k.J,{disabled:m||0===n.length,content:(0,u.jsxs)(J.v2,{children:[d?(0,u.jsx)(J.sN,{icon:"cancel",text:"Terminate ".concat(g.length," ").concat(1===g.length?"run":"runs"),disabled:0===g.length,onClick:function(){l("terminate")}}):null,h?(0,u.jsx)(J.sN,{icon:"delete",intent:"danger",text:"Delete ".concat(v.length," ").concat(1===v.length?"run":"runs"),disabled:0===v.length,onClick:function(){l("delete")}}):null,p?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(J.sN,{icon:"refresh",text:"Re-execute ".concat(T.length," ").concat(1===T.length?"run":"runs"),disabled:0===T.length,onClick:function(){l("reexecute")}}),(0,u.jsx)(J.sN,{icon:"refresh",text:"Re-execute ".concat(y.length," ").concat(1===y.length?"run":"runs"," from failure"),disabled:0===y.length,onClick:function(){l("reexecute-from-failure")}})]}):null]}),position:"bottom-right",children:(0,u.jsx)(_.zx,{disabled:m||0===n.length,rightIcon:(0,u.jsx)(x.JO,{name:"expand_more"}),intent:"primary",children:"Actions"})}),(0,u.jsx)(eu.A,{isOpen:"terminate"===c,onClose:closeDialogs,onComplete:onComplete,selectedRuns:j}),(0,u.jsx)(et.N,{isOpen:"delete"===c,onClose:closeDialogs,onComplete:onComplete,onTerminateInstead:function(){return l("terminate")},selectedRuns:b}),(0,u.jsx)(ReexecutionDialog,{isOpen:"reexecute-from-failure"===c,onClose:closeDialogs,onComplete:onComplete,selectedRuns:C,reexecutionStrategy:$.hmq.FROM_FAILURE}),(0,u.jsx)(ReexecutionDialog,{isOpen:"reexecute"===c,onClose:closeDialogs,onComplete:onComplete,selectedRuns:R,reexecutionStrategy:$.hmq.ALL_STEPS})]})}),em="Launchpad is unavailable because the pipeline is not present in the current repository.",ef=(0,d.Ps)(RunActionsMenu_templateObject()),eg=C.ZP.div.withConfig({componentId:"sc-5635f1bd-0"})(RunActionsMenu_templateObject1(),v.w.Gray100,v.w.Gray500),ej=(0,C.ZP)(O.rU).withConfig({componentId:"sc-5635f1bd-1"})(_templateObject2()),ev=t(87424),eb=t(84495),ey=t(49313);function RunTable_templateObject(){var e=(0,c._)(["\n  fragment RunTagsFragment on PipelineTag {\n    key\n    value\n  }\n"]);return RunTable_templateObject=function(){return e},e}function RunTable_templateObject1(){var e=(0,c._)(["\n  fragment RunTableRunFragment on Run {\n    id\n    status\n    stepKeysToExecute\n    canTerminate\n    hasReExecutePermission\n    hasTerminatePermission\n    hasDeletePermission\n    mode\n    rootRunId\n    parentRunId\n    pipelineSnapshotId\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n    solidSelection\n    assetSelection {\n      ... on AssetKey {\n        path\n      }\n    }\n    assetCheckSelection {\n      name\n      assetKey {\n        path\n      }\n    }\n    status\n    tags {\n      ...RunTagsFragment\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n"]);return RunTable_templateObject1=function(){return e},e}function RunTable_templateObject2(){var e=(0,c._)(["\n  ","\n"]);return RunTable_templateObject2=function(){return e},e}function _templateObject3(){var e=(0,c._)(["\n  display: contents;\n  > * {\n    display: contents;\n  }\n"]);return _templateObject3=function(){return e},e}var RunTable=function(e){var n=e.runs,t=e.filter,i=e.onAddTag,r=e.highlightedIds,o=e.actionBarComponents,s=e.belowActionBarComponents,c=e.hideCreatedBy,l=e.emptyState,d=n.map(function(e){return e.id}),g=(0,a._)((0,P.a)(d),2),j=g[0].checkedIds,v=g[1],b=v.onToggleFactory,y=v.onToggleAll,_=w.useMemo(function(){return n.some(function(e){return e.hasTerminatePermission||e.hasDeletePermission})},[n]),C=n.filter(function(e){return j.has(e.id)});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ActionBar,{top:(0,u.jsxs)(h.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center",grow:1},children:[o,(0,u.jsx)(ex,{selected:C,clearSelection:function(){return y(!1)}})]}),bottom:s}),function(){if(0!==n.length)return(0,u.jsxs)(m.i,{children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[_?(0,u.jsx)("th",{style:{width:42,paddingTop:0,paddingBottom:0},children:(0,u.jsx)(f.X,{indeterminate:j.size>0&&j.size!==n.length,checked:j.size===n.length,onChange:function(e){e.target instanceof HTMLInputElement&&y(e.target.checked)}})}):null,(0,u.jsx)("th",{style:{width:90},children:"Run ID"}),(0,u.jsx)("th",{style:{width:180},children:"Created date"}),(0,u.jsx)("th",{children:(0,u.jsx)(TargetHeader,{})}),c?null:(0,u.jsx)("th",{style:{width:160},children:"Launched by"}),(0,u.jsx)("th",{style:{width:120},children:"Status"}),(0,u.jsx)("th",{style:{width:190},children:"Duration"}),e.additionalColumnHeaders,(0,u.jsx)("th",{style:{width:52}})]})}),(0,u.jsx)("tbody",{children:n.map(function(n){var t;return(0,u.jsx)(RunRow,{canTerminateOrDelete:n.hasTerminatePermission||n.hasDeletePermission,run:n,onAddTag:i,checked:j.has(n.id),additionalColumns:null===(t=e.additionalColumnsForRow)||void 0===t?void 0:t.call(e,n),additionalActionsForRun:e.additionalActionsForRun,onToggleChecked:b(n.id),isHighlighted:r&&r.includes(n.id),hideCreatedBy:c},n.id)})})]});var o=!!Object.keys(t||{}).length;return l?(0,u.jsx)(u.Fragment,{children:l()}):(0,u.jsx)("div",{children:(0,u.jsx)(h.x,{margin:{vertical:32},children:o?(0,u.jsx)(p.t,{icon:"run",title:"No matching runs",description:"No runs were found for this filter."}):(0,u.jsx)(p.t,{icon:"run",title:"No runs found",description:(0,u.jsxs)(h.x,{flex:{direction:"column",gap:12},children:[(0,u.jsx)("div",{children:"You have not launched any runs yet."}),(0,u.jsxs)(h.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,u.jsx)(E.A,{icon:(0,u.jsx)(x.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,u.jsx)("span",{children:"or"}),(0,u.jsx)(E.A,{icon:(0,u.jsx)(x.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})})})}()]})},e_=(0,d.Ps)(RunTable_templateObject()),ew=(0,d.Ps)(RunTable_templateObject1(),ea.$X,e_),RunRow=function(e){var n,t=e.run,i=e.canTerminateOrDelete,r=e.onAddTag,c=e.checked,d=e.onToggleChecked,p=e.additionalColumns,m=e.additionalActionsForRun,C=e.isHighlighted,k=e.hideCreatedBy,T=t.pipelineName,R=(0,D.r)(t),P=w.useMemo(function(){if(R){var e=R.match.repository.pipelines.find(function(e){return e.name===T});return!!(null==e?void 0:e.isJob)}return!1},[R,T]),E=w.useMemo(function(){if(R){var e=R.match;return(0,z.kQ)(e.repository.name,e.repositoryLocation.name)}return null},[R]),B=(0,a._)((0,N.U)("pinned-system-tags",function(e){return Array.isArray(e)?e:[]}),2),H=B[0],U=B[1],Z=(0,a._)((0,N.U)("unpinned-tags",function(e){return Array.isArray(e)?e:[]}),2),J=Z[0],q=Z[1],V=w.useMemo(function(){var e=(0,l._)(t.tags);return(P&&"default"!==t.mode||!P)&&e.push({key:"mode",value:t.mode}),e.map(function(e){return(0,s._)((0,o._)({},e),{pinned:isUnpinnedByDefaultSystemTag(e.key)?-1!==H.indexOf(e.key):-1===J.indexOf(e.key)})})},[t,P,H,J]),K=t.tags.some(function(e){return e.key===eb.H.ParentRunId}),G=V.find(function(e){return e.key===eb.H.Backfill}),Q=(0,a._)(w.useState(!1),2),Y=Q[0],$=Q[1],W=(0,a._)(w.useState(!1),2),X=W[0],ee=W[1],en=w.useMemo(function(){var e=new Set([]),n=[];if(G&&G.pinned){var i,r=(null===(i=t.assetSelection)||void 0===i?void 0:i.length)?"/overview/backfills/".concat(G.value):(0,ey.it)([{token:"tag",value:"".concat(eb.H.Backfill,"=").concat(G.value)}]);n.push((0,s._)((0,o._)({},G),{link:r})),e.add(eb.H.Backfill)}return V.forEach(function(t){!e.has(t.key)&&t.pinned&&n.push(t)}),n},[G,V,null===(n=t.assetSelection)||void 0===n?void 0:n.length]),et=w.useCallback(function(e){isUnpinnedByDefaultSystemTag(e)?U(function(n){return toggleTag(n,e)}):q(function(n){return toggleTag(n,e)})},[q,U]);return(0,u.jsxs)(eC,{highlighted:!!C,onMouseEnter:function(){ee(!0)},onMouseLeave:function(){ee(!1)},children:[i?(0,u.jsx)("td",{children:d?(0,u.jsx)(f.X,{checked:!!c,onChange:function(e){if(e.target instanceof HTMLInputElement){var n=e.target.checked,t=e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift");d&&d({checked:n,shiftKey:t})}}}):null}):null,(0,u.jsx)("td",{children:(0,u.jsx)(O.rU,{to:"/runs/".concat(t.id),children:(0,u.jsx)(g.fv,{children:(0,ea.EI)(t)})})}),(0,u.jsx)("td",{children:(0,u.jsxs)(h.x,{flex:{direction:"column",gap:4},children:[(0,u.jsx)(ea.Zr,{run:t}),K?(0,u.jsx)("div",{children:(0,u.jsx)(j.V,{icon:"cached",children:"Re-execution"})}):null]})}),(0,u.jsxs)("td",{style:{position:"relative"},children:[(0,u.jsxs)(h.x,{flex:{direction:"column",gap:5},children:[(0,S.pv)(t.pipelineName)?(0,u.jsxs)(h.x,{flex:{gap:16},children:[(0,u.jsx)(M.h,{assetKeys:(0,ea.Bo)(t)}),(0,u.jsx)(M.m,{assetChecks:t.assetCheckSelection})]}):(0,u.jsxs)(h.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,u.jsx)(A.h,{isJob:P,showIcon:!0,pipelineName:t.pipelineName,pipelineHrefContext:"no-link"}),(0,u.jsx)(O.rU,{to:R?(0,L.jT)({repoName:R.match.repository.name,repoLocation:R.match.repositoryLocation.name,pipelineName:t.pipelineName,isJob:P}):(0,L.r4)(t.pipelineName),target:"_blank",children:(0,u.jsx)(x.JO,{name:"open_in_new",color:v.w.Blue500})})]}),(0,u.jsxs)(h.x,{flex:{direction:"row",alignItems:"center",wrap:"wrap"},style:{gap:"4px 8px"},children:[(0,u.jsx)(ek,{children:en.length?(0,u.jsx)(el.Q,{tags:en,onAddTag:r,onToggleTagPin:et}):null}),V.length>en.length?(0,u.jsx)(g.YS,{children:(0,u.jsxs)(b.Z,{onClick:function(){$(!0)},color:v.w.Gray700,style:{margin:"-4px",padding:"4px"},children:["View all tags (",V.length,")"]})}):null]})]}),X&&V.length?(0,u.jsx)(I.b,{onShortcut:function(){$(function(e){return!e})},shortcutLabel:"t",shortcutFilter:function(e){return"KeyT"===e.code},children:null},"runtabletags"):null]}),k?null:(0,u.jsx)("td",{children:(0,u.jsx)(F.f,{repoAddress:E,tags:t.tags||[],onAddTag:r})}),(0,u.jsx)("td",{children:(0,u.jsx)(ev.M9,{status:t.status,runId:t.id})}),(0,u.jsx)("td",{children:(0,u.jsx)(ea.Tw,{run:t})}),p,(0,u.jsx)("td",{children:(0,u.jsx)(ep,{run:t,onAddTag:r,additionalActionsForRun:m})}),(0,u.jsxs)(y.Vq,{isOpen:Y,title:"Tags",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:function(){$(!1)},children:[(0,u.jsx)(y.a7,{children:(0,u.jsx)(el.Q,{tags:V,onAddTag:r,onToggleTagPin:et})}),(0,u.jsx)(y.cN,{topBorder:!0,children:(0,u.jsx)(_.zx,{intent:"primary",onClick:function(){$(!1)},children:"Close"})})]})]})},eC=C.ZP.tr.withConfig({componentId:"sc-6675002d-0"})(RunTable_templateObject2(),function(e){return e.highlighted?"box-shadow: inset 3px 3px #bfccd6, inset -3px -3px #bfccd6;":null});function ActionBar(e){var n=e.top,t=e.bottom;return(0,u.jsxs)(h.x,{flex:{direction:"column"},padding:{vertical:12},children:[(0,u.jsx)(h.x,{flex:{alignItems:"center",gap:12},padding:{left:24,right:12},children:n}),t?(0,u.jsx)(h.x,{margin:{top:12},padding:{left:24,right:12,top:8},border:"top",flex:{gap:8,wrap:"wrap"},children:t}):null]})}var ek=C.ZP.div.withConfig({componentId:"sc-6675002d-1"})(_templateObject3());function isUnpinnedByDefaultSystemTag(e){return e.startsWith(eb.H.Namespace)&&e!==eb.H.Partition&&e!==eb.H.Backfill||"mode"===e}function toggleTag(e,n){var t=e||[];return -1!==t.indexOf(n)?t.filter(function(e){return e!==n}):(0,l._)(t).concat([n])}function TargetHeader(){var e=(0,a._)((0,N.U)("RunTableTabPinningNux",function(e){return e}),2),n=e[0],t=e[1];return n?(0,u.jsx)("div",{children:"Target"}):(0,u.jsx)(ProductTour,{title:"Hide and show run tags",description:(0,u.jsx)(u.Fragment,{children:"You can show tags that you prefer quick access to and hide tags you don't by hovering over the tag and selecting the show/hide tag option."}),position:r.BOTTOM_RIGHT,video:"/_next/static/media/ShowAndHideRunTags.3fa9746ba2f415094d257d3c8e73389d.mp4",width:"616px",actions:{dismiss:function(){t("1")}},children:(0,u.jsx)("div",{children:"Target"})})}},65767:function(e,n,t){t.d(n,{l:function(){return useCursorPaginatedQuery}});var i=t(85333),r=t(6692),o=t(58467),s=t(82550),a=t(40794),c=t(2784),l=t(71277);function useCursorPaginatedQuery(e){var n=(0,o._)(c.useState(function(){return[]}),2),t=n[0],u=n[1],d=(0,o._)((0,l.q)({queryKey:"cursor"}),2),h=d[0],p=d[1],x=(0,r._)((0,i._)({},e.variables),{cursor:h,limit:e.pageSize+1}),m=(0,a.a)(e.query,{skip:e.skip,variables:x,notifyOnNetworkStatusChange:!0}),f={hasPrevCursor:!!h,hasNextCursor:e.getResultArray(m.data).length===e.pageSize+1,popCursor:function(){var e=(0,s._)(t);p(e.pop()),u(e)},advanceCursor:function(){h&&u(function(e){return(0,s._)(e).concat([h])});var n=m.data&&e.nextCursorForResult(m.data);n&&p(n)},reset:function(){u([]),p(void 0)}};return{queryResult:m,paginationProps:f}}},5035:function(e,n,t){t.d(n,{U:function(){return MenuLink}});var i=t(85333),r=t(6692),o=t(2281),s=t(73235),a=t(52322),c=t(44678),l=t(18399),u=t(34e3),d=t(86412);t(2784);var h=t(47933),p=t(35505);function _templateObject(){var e=(0,s._)(["\n  text-decoration: none;\n\n  border-radius: 4px;\n  display: block;\n  line-height: 20px;\n  padding: 6px 8px 6px 12px;\n  transition:\n    background-color 50ms,\n    box-shadow 150ms;\n  align-items: flex-start;\n  user-select: none;\n\n  /**\n   * Use margin instead of align-items: center because the contents of the menu item may wrap \n   * in unusual circumstances.\n   */\n  "," {\n    margin-top: 2px;\n  }\n\n  ",":first-child {\n    margin-left: -4px;\n  }\n\n  &&&:link,\n  &&&:visited,\n  &&&:hover,\n  &&&:active {\n    color: ",";\n    text-decoration: none;\n  }\n\n  &&&:hover {\n    background: ",";\n  }\n"]);return _templateObject=function(){return e},e}var MenuLink=function(e){var n=e.icon,t=e.intent,s=e.text,u=e.disabled,d=(0,o._)(e,["icon","intent","text","disabled"]);return u?(0,a.jsx)(c.sN,{disabled:!0,icon:n,intent:t,text:s}):(0,a.jsx)(x,(0,r._)((0,i._)({},d),{children:(0,a.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,c.cR)(n,t),(0,a.jsx)("div",{children:s})]})}))},x=(0,p.ZP)(h.rU).withConfig({componentId:"sc-2870781f-0"})(_templateObject(),u.a1,u.a1,d.w.Gray900,d.w.Gray100)},19358:function(e,n,t){t.d(n,{Y:function(){return o}});var i=t(73235),r=t(86412);function _templateObject(){var e=(0,i._)(["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the `tr` and we don't want an inset\n   * box-shadow on `th` elements because it will create a double-border on the\n   * bottom of the `thead` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * `th` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"],["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the \\`tr\\` and we don't want an inset\n   * box-shadow on \\`th\\` elements because it will create a double-border on the\n   * bottom of the \\`thead\\` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * \\`th\\` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"]);return _templateObject=function(){return e},e}var o=t(35505).ZP.div.withConfig({componentId:"sc-518cab7f-0"})(_templateObject(),function(e){var n=e.$top;return void 0===n?0:n},r.w.White,r.w.KeylineGray)}}]);
//# sourceMappingURL=611.9a70baa52e743797.js.map