"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{17131:function(e,n,t){t.d(n,{m:function(){return PageHeader}});var o=t(73235),i=t(52322);t(2784);var r=t(35505),a=t(18399),s=t(86412);function _templateObject(){var e=(0,o._)(["\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp4-breadcrumbs {\n    height: auto;\n  }\n"]);return _templateObject=function(){return e},e}var PageHeader=function(e){var n=e.title,t=e.tags,o=e.right,r=e.tabs;return(0,i.jsxs)(c,{background:s.w.Gray50,padding:{top:16,left:24,right:12},border:"bottom",children:[(0,i.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,i.jsxs)(a.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[n,t]}),o]}),r]})},c=(0,r.ZP)(a.x).withConfig({componentId:"sc-a1bb63a9-0"})(_templateObject())},74772:function(e,n,t){t.r(n),t.d(n,{CodeLocationsPage:function(){return CodeLocationsPage},default:function(){return et}});var o=t(58467),i=t(52322),r=t(18399),a=t(17131),s=t(81308),c=t(34822),l=t(2784),d=t(68028),u=t(28252),x=t(39852),h=t(63832),f=t(92364),p=t(68577),j=t(55658),m=t(73235),g=t(82550),y=t(16861),v=t(9001),C=t(86412),b=t(47933),w=t(35505),L=t(33869),_=t(87612),O=t(85333),R=t(6692),k=t(44678),E=t(37783),V=t(34e3),I=t(10952),z=t(54266),S=t(94092),N=t(29316),CodeLocationMenu_CodeLocationMenu=function(e){var n,t=e.locationNode,r=(0,o._)(l.useState(!1),2),a=r[0],s=r[1],c=(0,o._)(l.useState(!1),2),d=c[0],u=c[1],x=null,h=null;return(null===(n=t.locationOrLoadError)||void 0===n?void 0:n.__typename)==="RepositoryLocation"&&null!==t.locationOrLoadError.dagsterLibraryVersions&&(x=(0,i.jsx)(k.sN,{icon:"info",text:"View Dagster libraries",onClick:function(){return u(!0)}}),h=(0,i.jsx)(DagsterLibrariesDialog,{libraries:t.locationOrLoadError.dagsterLibraryVersions,isOpen:d,setIsOpen:u})),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.J,{position:"bottom-left",content:(0,i.jsxs)(k.v2,{children:[(0,i.jsx)(k.sN,{icon:"info",text:"View configuration",onClick:function(){return s(!0)}}),x]}),children:(0,i.jsx)(v.zx,{icon:(0,i.jsx)(V.JO,{name:"expand_more"})})}),(0,i.jsx)(CodeLocationConfigDialog,{metadata:t.displayMetadata,isOpen:a,setIsOpen:s}),h]})},CodeLocationConfigDialog=function(e){var n=e.isOpen,t=e.setIsOpen,o=e.metadata;return(0,i.jsxs)(I.Vq,{title:"Code location configuration",icon:"info",isOpen:n,onClose:function(){return t(!1)},style:{width:"600px"},children:[(0,i.jsx)(CodeLocationConfig,{displayMetadata:o}),(0,i.jsx)(I.cN,{topBorder:!0,children:(0,i.jsx)(v.zx,{onClick:function(){return t(!1)},intent:"primary",children:"Done"})})]})},DagsterLibrariesDialog=function(e){var n=e.isOpen,t=e.setIsOpen,o=e.libraries;return(0,i.jsxs)(I.Vq,{title:"Dagster library versions",icon:"info",isOpen:n,onClose:function(){return t(!1)},style:{width:"600px"},children:[(0,i.jsxs)(z.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Libray"}),(0,i.jsx)("th",{children:"Version"})]})}),(0,i.jsx)("tbody",{children:o.map(function(e){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.name}),(0,i.jsx)("td",{children:e.version})]},e.name)})})]}),(0,i.jsx)(I.cN,{topBorder:!0,children:(0,i.jsx)(v.zx,{onClick:function(){return t(!1)},intent:"primary",children:"Done"})})]})},CodeLocationConfig=function(e){var n=e.displayMetadata,t=l.useMemo(function(){var e=n.reduce(function(e,n){return(0,R._)((0,O._)({},e),(0,_._)({},n.key,n.value))},{});return N.Pz(e)},[n]);return(0,i.jsx)(S.u,{value:t,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})},T=t(81862),D=t(22970),P=t(43180),M=t(57830),B=t(12084),F=t(19211),q=t(47544),H=t(33308),U=t(40092),Z=t(35157),$=t(38153);function _templateObject(){var e=(0,m._)(["\n  :hover,\n  :active {\n    outline: none;\n    text-decoration: none;\n  }\n"]);return _templateObject=function(){return e},e}var RepositoryCountTags_RepositoryCountTags=function(e){var n=e.repo,t=e.repoAddress,o=n.assetGroups.length,a=n.pipelines.filter(function(e){var n=e.name;return!(0,Z.pv)(n)}).length,s=n.schedules.length,c=n.sensors.length;return(0,i.jsxs)(r.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,i.jsx)(P.u,{content:1===o?"1 asset group":"".concat(o," asset groups"),placement:"top",children:(0,i.jsx)(G,{to:(0,$.$U)(t,"/assets"),children:(0,i.jsx)(M.V,{interactive:!0,icon:"asset_group",children:o})})}),(0,i.jsx)(P.u,{content:1===a?"1 job":"".concat(a," jobs"),placement:"top",children:(0,i.jsx)(G,{to:(0,$.$U)(t,"/jobs"),children:(0,i.jsx)(M.V,{interactive:!0,icon:"job",children:a})})}),(0,i.jsx)(P.u,{content:1===s?"1 schedule":"".concat(s," schedules"),placement:"top",children:(0,i.jsx)(G,{to:(0,$.$U)(t,"/schedules"),children:(0,i.jsx)(M.V,{interactive:!0,icon:"schedule",children:s})})}),(0,i.jsx)(P.u,{content:1===c?"1 sensor":"".concat(c," sensors"),placement:"top",children:(0,i.jsx)(G,{to:(0,$.$U)(t,"/sensors"),children:(0,i.jsx)(M.V,{interactive:!0,icon:"sensors",children:c})})})]})},G=(0,w.ZP)(b.rU).withConfig({componentId:"sc-8d069f7d-0"})(_templateObject()),J=t(70958),W=t(37160),A=t(44254);function CodeLocationRowSet_templateObject(){var e=(0,m._)(["\n  width: 100%;\n  color: ",";\n  font-size: 12px;\n\n  .bp4-popover2-target {\n    overflow: hidden;\n  }\n\n  button {\n    background: transparent;\n    border: none;\n    color: ",";\n    cursor: pointer;\n    font-size: 12px;\n    overflow: hidden;\n    padding: 0;\n    margin: 0;\n    width: 100%;\n\n    :focus {\n      outline: none;\n    }\n  }\n"]);return CodeLocationRowSet_templateObject=function(){return e},e}var ImageName=function(e){var n=e.metadata,t=(0,q.m)(),o=n.find(function(e){return"image"===e.key}),r=(null==o?void 0:o.value)||"",a=l.useCallback((0,T._)(function(){return(0,D.Jh)(this,function(e){switch(e.label){case 0:return t(r),[4,(0,F.B7)({intent:"success",icon:"done",message:"Image string copied!"})];case 1:return e.sent(),[2]}})}),[t,r]);return o?(0,i.jsxs)(Q,{flex:{direction:"row",gap:4},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,i.jsx)(P.u,{content:"Click to copy",placement:"top",display:"block",children:(0,i.jsx)("button",{onClick:a,children:(0,i.jsx)(y.g,{text:o.value})})})]}):null},Q=(0,w.ZP)(r.x).withConfig({componentId:"sc-e700a69a-0"})(CodeLocationRowSet_templateObject(),C.w.Gray700,C.w.Gray700),ModuleOrPackageOrFile=function(e){var n=e.metadata.find(function(e){var n=e.key;return"module_name"===n||"package_name"===n||"python_file"===n});return n?(0,i.jsxs)(r.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:C.w.Gray700,fontSize:12},children:[(0,i.jsxs)("span",{style:{fontWeight:500},children:[n.key,":"]}),(0,i.jsx)(y.g,{text:n.value})]}):null},LocationStatus=function(e){var n,t=e.location,a=e.locationOrError,s=(0,o._)(l.useState(!1),2),c=s[0],d=s[1],u=l.useMemo(function(){return(0,U.je)(t)},[t]),x=(0,U.Dc)({scope:"location",reloadFn:u}),h=x.reloading,f=x.tryReload;return"LOADING"===a.loadStatus?a.locationOrLoadError?(0,i.jsx)(M.V,{minimal:!0,intent:"primary",children:"Updating..."}):(0,i.jsx)(M.V,{minimal:!0,intent:"primary",children:"Loading..."}):(null===(n=a.locationOrLoadError)||void 0===n?void 0:n.__typename)==="PythonError"?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.x,{flex:{alignItems:"center",gap:12},children:[(0,i.jsx)(M.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,i.jsx)(B.Z,{onClick:function(){return d(!0)},children:(0,i.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,i.jsx)(J.p,{location:t,isOpen:c,error:a.locationOrLoadError,reloading:h,onDismiss:function(){return d(!1)},onTryReload:function(){return f()}})]}):(0,i.jsx)(M.V,{minimal:!0,intent:"success",children:"Loaded"})},ReloadButton=function(e){var n=e.location;return(0,i.jsx)(H.s,{location:n,ChildComponent:function(e){var n=e.reloading,t=e.tryReload,o=e.hasReloadPermission;return(0,i.jsx)(r.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,i.jsx)(P.u,{content:o?"":H.H,canShow:!o,useDisabledButtonTooltipFix:!0,children:(0,i.jsx)(v.zx,{icon:(0,i.jsx)(V.JO,{name:"refresh"}),disabled:!o,loading:n,onClick:function(){return t()},children:"Reload"})})})}})};function VirtualizedCodeLocationRow_templateObject(){var e=(0,m._)(["\n  display: grid;\n  grid-template-columns: ",";\n"]);return VirtualizedCodeLocationRow_templateObject=function(){return e},e}var Y="3fr 1fr 1fr 240px 160px",VirtualizedCodeLocationErrorRow=function(e){var n=e.locationNode,t=e.measure,o=n.name;return(0,i.jsx)("div",{ref:t,children:(0,i.jsxs)(K,{border:"bottom",children:[(0,i.jsx)(j.E5,{children:(0,i.jsx)(y.g,{text:o})}),(0,i.jsx)(j.E5,{children:(0,i.jsx)("div",{children:(0,i.jsx)(LocationStatus,{location:o,locationOrError:n})})}),(0,i.jsx)(j.E5,{children:(0,i.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,i.jsx)(L.C,{unixTimestamp:n.updatedTimestamp})})}),(0,i.jsx)(j.E5,{children:"–"}),(0,i.jsx)(j.E5,{children:(0,i.jsxs)(v.zH,{children:[(0,i.jsx)(ReloadButton,{location:o}),(0,i.jsx)(CodeLocationMenu_CodeLocationMenu,{locationNode:n})]})})]})})},VirtualizedCodeLocationRow=function(e){var n=e.codeLocation,t=e.repository,o=e.measure,a=(0,W.kQ)(t.name,t.location.name),s=(0,g._)(n.displayMetadata).concat((0,g._)(t.displayMetadata));return(0,i.jsx)("div",{ref:o,children:(0,i.jsxs)(K,{border:"bottom",children:[(0,i.jsx)(j.E5,{children:(0,i.jsxs)(r.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)("div",{style:{fontWeight:500},children:(0,i.jsx)(b.rU,{to:(0,$.$U)(a),children:(0,i.jsx)(y.g,{text:(0,A.Uz)(a)})})}),(0,i.jsx)(ImageName,{metadata:s}),(0,i.jsx)(ModuleOrPackageOrFile,{metadata:s})]})}),(0,i.jsx)(j.E5,{children:(0,i.jsx)("div",{children:(0,i.jsx)(LocationStatus,{location:t.name,locationOrError:n})})}),(0,i.jsx)(j.E5,{children:(0,i.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,i.jsx)(L.C,{unixTimestamp:n.updatedTimestamp})})}),(0,i.jsx)(j.E5,{children:(0,i.jsx)(RepositoryCountTags_RepositoryCountTags,{repo:t,repoAddress:a})}),(0,i.jsx)(j.E5,{style:{alignItems:"flex-end"},children:(0,i.jsxs)(v.zH,{children:[(0,i.jsx)(ReloadButton,{location:n.name}),(0,i.jsx)(CodeLocationMenu_CodeLocationMenu,{locationNode:n})]})})]})})},VirtualizedCodeLocationHeader=function(){return(0,i.jsxs)(r.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:Y,height:"32px",fontSize:"12px",color:C.w.Gray600},children:[(0,i.jsx)(j.qN,{children:"Name"}),(0,i.jsx)(j.qN,{children:"Status"}),(0,i.jsx)(j.qN,{children:"Updated"}),(0,i.jsx)(j.qN,{children:"Definitions"}),(0,i.jsx)(j.qN,{style:{textAlign:"right"},children:"Actions"})]})},K=(0,w.ZP)(r.x).withConfig({componentId:"sc-c0091107-0"})(VirtualizedCodeLocationRow_templateObject(),Y),RepositoryLocationsList=function(e){var n,t,o=e.loading,a=e.codeLocations,s=e.searchValue,c=l.useRef(null),d=(0,p.useVirtualizer)({count:a.length,getScrollElement:function(){return c.current},estimateSize:function(){return 64},overscan:10}),u=d.getTotalSize(),x=d.getVirtualItems();return o&&!x.length?(0,i.jsxs)(r.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,i.jsx)(h.$,{purpose:"body-text"}),(0,i.jsx)("div",{children:"Loading..."})]}):x.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(VirtualizedCodeLocationHeader,{}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(j.W2,{ref:c,children:(0,i.jsx)(j.Nh,{$totalHeight:u,children:(0,i.jsx)(j.HR,{$start:null!==(t=null===(n=x[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0,children:x.map(function(e){var n=e.index,t=e.key,o=e.measureElement,r=a[n];return"error"===r.type?(0,i.jsx)(VirtualizedCodeLocationErrorRow,{locationNode:r.node,measure:o},t):(0,i.jsx)(VirtualizedCodeLocationRow,{codeLocation:r.codeLocation,repository:r.repository,measure:o},t)})})})})})]}):s?(0,i.jsx)(r.x,{padding:{vertical:32},children:(0,i.jsx)(f.t,{icon:"folder",title:"No matching code locations",description:(0,i.jsxs)("div",{children:["No code locations were found for search query ",(0,i.jsx)("strong",{children:s}),"."]})})}):(0,i.jsx)(r.x,{padding:{vertical:32},children:(0,i.jsx)(f.t,{icon:"folder",title:"No code locations",description:"When you add a code location, your definitions will appear here."})})},X=t(51969),ee=t(74897),en=t(4120),flatten=function(e){var n=[],t=!0,o=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)!function(){var e=r.value,t=e.locationOrLoadError;t&&(null==t?void 0:t.__typename)!=="PythonError"?t.repositories.forEach(function(t){n.push({type:"repository",codeLocation:e,repository:t})}):n.push({type:"error",node:e})}()}catch(e){o=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return n},filterBySearch=function(e,n){var t=n.toLocaleLowerCase();return e.filter(function(e){return"error"===e.type?e.node.name.toLocaleLowerCase().includes(t):e.codeLocation.name.toLocaleLowerCase().includes(t)||e.repository.name.toLocaleLowerCase().includes(t)})},flattenCodeLocationRows=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=flatten(e),o=filterBySearch(t,n);return{flattened:t,filtered:o}},CodeLocationsPage=function(){(0,d.Px)(),(0,u.j)("Code locations");var e=l.useContext(ee.N).pageTitle,n=l.useContext(X.C5),t=n.locationEntries,h=n.loading,f=(0,o._)(l.useState(""),2),p=f[0],j=f[1],m=l.useCallback(function(e){j(e.target.value)},[]),g=p.toLocaleLowerCase(),y=l.useMemo(function(){return flattenCodeLocationRows(t,g)},[t,g]),v=y.flattened,C=y.filtered,b=v.length,w=b>10;return(0,i.jsxs)(r.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(a.m,{title:(0,i.jsx)(s.X6,{children:e}),tabs:(0,i.jsx)(en.Z,{tab:"locations"})}),(0,i.jsxs)(r.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[w?(0,i.jsx)(c.oi,{icon:"search",value:p,onChange:m,placeholder:"Filter code locations by name…",style:{width:"400px"}}):(0,i.jsx)(s.pm,{id:"repository-locations",children:h||!b?"Code locations":1===b?"1 code location":"".concat(b," code locations")}),(0,i.jsxs)(r.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[w?(0,i.jsx)("div",{children:"".concat(b," code locations")}):null,(0,i.jsx)(x.i,{})]})]}),(0,i.jsx)(RepositoryLocationsList,{loading:h,codeLocations:C,searchValue:p})]})},et=CodeLocationsPage},4120:function(e,n,t){t.d(n,{Z:function(){return InstanceTabs}});var o=t(52322),i=t(18399),r=t(56024),a=t(2784),s=t(20775),c=t(55237),l=t(34e3),d=t(86412),u=t(29255),x=t(77334),h=a.memo(function(){var e=a.useContext(u.Z).daemons;return e?(0,o.jsx)(x.a,{content:e.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,o.jsx)(l.JO,{name:"warning",color:d.w.Yellow500})}):null}),f=t(43180),p=t(63832),j=a.memo(function(e){var n=e.placeholder,t=a.useContext(u.Z).codeLocations;return t?"spinner"===t.type?(0,o.jsx)(f.u,{content:t.content,placement:"bottom",children:(0,o.jsx)(p.$,{purpose:"body-text",fillColor:d.w.Gray300})}):(0,o.jsx)(x.a,{content:t.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,o.jsx)(l.JO,{name:"warning",color:d.w.Yellow500})}):n?(0,o.jsx)("div",{style:{width:"16px"}}):null}),m=t(40049),g=t(74897),y=t(78945),InstanceTabs=function(e){var n=e.refreshState,t=e.tab,l=a.useContext(g.N).healthTitle,d=(0,y._)(),u=(0,s.gV)().flagInstanceConcurrencyLimits;return(0,o.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,o.jsxs)(r.mQ,{selectedTabId:t,children:[(0,o.jsx)(m.f,{id:"locations",title:"Code locations",to:"/locations",icon:(0,o.jsx)(j,{placeholder:!1})}),(0,o.jsx)(m.f,{id:"health",title:l,to:"/health",icon:(0,o.jsx)(h,{})}),d&&u?(0,o.jsx)(m.f,{id:"concurrency",title:"Concurrency limits",to:"/concurrency"}):null,d?(0,o.jsx)(m.f,{id:"config",title:"Configuration",to:"/config"}):null]}),n?(0,o.jsx)(i.x,{padding:{bottom:8},children:(0,o.jsx)(c.xi,{refreshState:n})}):null]})}},78945:function(e,n,t){t.d(n,{_:function(){return useCanSeeConfig}});var o=t(73235),i=t(40794),r=t(60138);function _templateObject(){var e=(0,o._)(["\n  query InstanceConfigHasInfo {\n    instance {\n      id\n      hasInfo\n    }\n  }\n"]);return _templateObject=function(){return e},e}var useCanSeeConfig=function(){var e=(0,i.a)(a).data;return!!(null==e?void 0:e.instance.hasInfo)},a=(0,r.Ps)(_templateObject())},39852:function(e,n,t){t.d(n,{i:function(){return ReloadAllButton}});var o=t(58467),i=t(52322),r=t(43180),a=t(9001),s=t(34e3),c=t(10952),l=t(2784),d=t(54949),u=t(56266),x=t(40092),h=t(70958),ReloadAllButton=function(e){var n=e.label,t=void 0===n?"Reload all":n,f=(0,d.WB)(),p=f.permissions.canReloadWorkspace,j=f.disabledReasons,m=(0,x.Dc)({scope:"workspace",reloadFn:x.rL}),g=m.reloading,y=m.tryReload,v=m.error,C=m.errorLocationId,b=(0,o._)(l.useState(!!v),2),w=b[0],L=b[1];return(l.useEffect(function(){return L(!!v)},[v]),p)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.zx,{onClick:y,icon:(0,i.jsx)(s.JO,{name:"refresh"}),loading:g,intent:"none",children:t}),C?(0,i.jsx)(h.V,{error:v,location:C,reloading:g,onTryReload:y,onDismiss:function(){return L(!1)},isOpen:w}):(0,i.jsxs)(c.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:w,children:[(0,i.jsx)(c.a7,{children:v&&(0,i.jsx)(u.T9,{error:v})}),(0,i.jsx)(c.cN,{children:(0,i.jsx)(a.zx,{onClick:function(){return L(!1)},children:"Dismiss"})})]})]}):(0,i.jsx)(r.u,{content:j.canReloadWorkspace,children:(0,i.jsx)(a.zx,{icon:(0,i.jsx)(s.JO,{name:"refresh"}),disabled:!0,intent:"none",children:t})})}}}]);
//# sourceMappingURL=772.286329c351abfe12.js.map