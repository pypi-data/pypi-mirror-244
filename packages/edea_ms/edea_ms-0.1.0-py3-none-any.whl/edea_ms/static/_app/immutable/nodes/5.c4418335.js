import{g as W}from"../chunks/helpers.03783b7e.js";import{e as X}from"../chunks/index.f836e1a8.js";import{s as Z,e as T,a as H,c as $,b as D,p as x,g as I,f as b,q as O,i as q,h,u as M,t as j,d as S,j as R,r as N,n as Y}from"../chunks/scheduler.849ca478.js";import{S as ee,i as te,a as z,c as Q,t as V,g as U,b as ae,d as le,m as re,e as ne}from"../chunks/index.2106cb98.js";import{e as L}from"../chunks/navigation.11524147.js";import{V as oe}from"../chunks/VegaLite.82c6b264.js";const se=async({fetch:u,url:e})=>{var p;let a=e.searchParams.get("id"),l=(p=e.searchParams.get("testruns"))==null?void 0:p.split(",").sort();const _=await u("/api/projects/"+a).then(r=>{if(!r.ok)throw X(r.status,r.statusText);return r.json()});let i=[];if(l)for(var o of l){const{run:r,measurements:s}=await W(u,o);i.push({run:r,measurements:s})}return{project:_,runs:i}},ve=Object.freeze(Object.defineProperty({__proto__:null,load:se},Symbol.toStringTag,{value:"Module"}));function F(u,e,a){const l=u.slice();return l[1]=e[a],l}function G(u,e,a){const l=u.slice();return l[1]=e[a],l}function J(u){let e,a,l=u[1].run.id+"",_,i,o=u[1].run.short_code+"",p;return{c(){e=T("th"),a=j("ID: "),_=j(l),i=j(", SC: "),p=j(o)},l(r){e=$(r,"TH",{});var s=D(e);a=S(s,"ID: "),_=S(s,l),i=S(s,", SC: "),p=S(s,o),s.forEach(b)},m(r,s){q(r,e,s),h(e,a),h(e,_),h(e,i),h(e,p)},p(r,s){s&1&&l!==(l=r[1].run.id+"")&&R(_,l),s&1&&o!==(o=r[1].run.short_code+"")&&R(p,o)},d(r){r&&b(e)}}}function ie(u){let e,a,l=u[1].run.id+"",_;return{c(){e=T("p"),a=j("no viz for "),_=j(l)},l(i){e=$(i,"P",{});var o=D(e);a=S(o,"no viz for "),_=S(o,l),o.forEach(b)},m(i,o){q(i,e,o),h(e,a),h(e,_)},p(i,o){o&1&&l!==(l=i[1].run.id+"")&&R(_,l)},i:Y,o:Y,d(i){i&&b(e)}}}function ce(u){var A;let e,a,l,_,i=u[1].run.id+"",o,p,r,s,k,E=u[1].run.started_at+"",m,C,c=u[1].run.completed_at+"",P,n,f,t,v;return f=new oe({props:{data:{measurements:u[1].measurements},spec:(A=u[1].run.data)==null?void 0:A.vega_lite}}),{c(){e=T("td"),a=T("p"),l=T("a"),_=j("Run "),o=j(i),r=H(),s=T("p"),k=j("Started at "),m=j(E),C=j(", completed at "),P=j(c),n=H(),ae(f.$$.fragment),t=H(),this.h()},l(g){e=$(g,"TD",{});var d=D(e);a=$(d,"P",{});var y=D(a);l=$(y,"A",{href:!0});var w=D(l);_=S(w,"Run "),o=S(w,i),w.forEach(b),y.forEach(b),r=I(d),s=$(d,"P",{});var B=D(s);k=S(B,"Started at "),m=S(B,E),C=S(B,", completed at "),P=S(B,c),B.forEach(b),n=I(d),le(f.$$.fragment,d),t=I(d),d.forEach(b),this.h()},h(){O(l,"href",p="/testruns/"+u[1].run.id)},m(g,d){q(g,e,d),h(e,a),h(a,l),h(l,_),h(l,o),h(e,r),h(e,s),h(s,k),h(s,m),h(s,C),h(s,P),h(e,n),re(f,e,null),h(e,t),v=!0},p(g,d){var w;(!v||d&1)&&i!==(i=g[1].run.id+"")&&R(o,i),(!v||d&1&&p!==(p="/testruns/"+g[1].run.id))&&O(l,"href",p),(!v||d&1)&&E!==(E=g[1].run.started_at+"")&&R(m,E),(!v||d&1)&&c!==(c=g[1].run.completed_at+"")&&R(P,c);const y={};d&1&&(y.data={measurements:g[1].measurements}),d&1&&(y.spec=(w=g[1].run.data)==null?void 0:w.vega_lite),f.$set(y)},i(g){v||(z(f.$$.fragment,g),v=!0)},o(g){V(f.$$.fragment,g),v=!1},d(g){g&&b(e),ne(f)}}}function K(u){let e,a,l,_;const i=[ce,ie],o=[];function p(r,s){var k;return(k=r[1].run.data)!=null&&k.vega_lite?0:1}return e=p(u),a=o[e]=i[e](u),{c(){a.c(),l=N()},l(r){a.l(r),l=N()},m(r,s){o[e].m(r,s),q(r,l,s),_=!0},p(r,s){let k=e;e=p(r),e===k?o[e].p(r,s):(U(),V(o[k],1,1,()=>{o[k]=null}),Q(),a=o[e],a?a.p(r,s):(a=o[e]=i[e](r),a.c()),z(a,1),a.m(l.parentNode,l))},i(r){_||(z(a),_=!0)},o(r){V(a),_=!1},d(r){r&&b(l),o[e].d(r)}}}function ue(u){let e,a,l="Compare testruns",_,i,o,p,r,s,k,E=L(u[0].runs),m=[];for(let n=0;n<E.length;n+=1)m[n]=J(G(u,E,n));let C=L(u[0].runs),c=[];for(let n=0;n<C.length;n+=1)c[n]=K(F(u,C,n));const P=n=>V(c[n],1,1,()=>{c[n]=null});return{c(){e=T("div"),a=T("h2"),a.textContent=l,_=H(),i=T("table"),o=T("thead");for(let n=0;n<m.length;n+=1)m[n].c();p=H(),r=T("tbody"),s=T("tr");for(let n=0;n<c.length;n+=1)c[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var f=D(e);a=$(f,"H2",{class:!0,"data-svelte-h":!0}),x(a)!=="svelte-2ihjxu"&&(a.textContent=l),_=I(f),i=$(f,"TABLE",{class:!0});var t=D(i);o=$(t,"THEAD",{});var v=D(o);for(let d=0;d<m.length;d+=1)m[d].l(v);v.forEach(b),p=I(t),r=$(t,"TBODY",{});var A=D(r);s=$(A,"TR",{});var g=D(s);for(let d=0;d<c.length;d+=1)c[d].l(g);g.forEach(b),A.forEach(b),t.forEach(b),f.forEach(b),this.h()},h(){O(a,"class","h2"),O(i,"class","table table-hover"),O(e,"class","container mx-auto p-8 space-y-8")},m(n,f){q(n,e,f),h(e,a),h(e,_),h(e,i),h(i,o);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(o,null);h(i,p),h(i,r),h(r,s);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(s,null);k=!0},p(n,[f]){if(f&1){E=L(n[0].runs);let t;for(t=0;t<E.length;t+=1){const v=G(n,E,t);m[t]?m[t].p(v,f):(m[t]=J(v),m[t].c(),m[t].m(o,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=E.length}if(f&1){C=L(n[0].runs);let t;for(t=0;t<C.length;t+=1){const v=F(n,C,t);c[t]?(c[t].p(v,f),z(c[t],1)):(c[t]=K(v),c[t].c(),z(c[t],1),c[t].m(s,null))}for(U(),t=C.length;t<c.length;t+=1)P(t);Q()}},i(n){if(!k){for(let f=0;f<C.length;f+=1)z(c[f]);k=!0}},o(n){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)V(c[f]);k=!1},d(n){n&&b(e),M(m,n),M(c,n)}}}function fe(u,e,a){let{data:l}=e;return u.$$set=_=>{"data"in _&&a(0,l=_.data)},[l]}class be extends ee{constructor(e){super(),te(this,e,fe,ue,Z,{data:0})}}export{be as component,ve as universal};
