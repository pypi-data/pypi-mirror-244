import{o as U}from"../chunks/helpers.def388e7.js";import{e as W}from"../chunks/index.f836e1a8.js";import{s as X,f as T,a as H,g as $,h as C,Z as x,c as I,d as b,j as O,i as L,B as h,a0 as M,l as j,m as S,n as B,e as N,r as Y}from"../chunks/scheduler.7de60500.js";import{S as ee,i as te,a as R,c as K,t as V,g as Q,b as ae,d as le,m as re,e as oe}from"../chunks/index.e444f18c.js";import{e as q}from"../chunks/navigation.0671965c.js";import{V as ne}from"../chunks/VegaLite.92894fc4.js";const se=async({fetch:f,url:e})=>{var o;let l=e.searchParams.get("id"),a=(o=e.searchParams.get("testruns"))==null?void 0:o.split(",").sort();const u=await f("/api/projects/"+l).then(m=>{if(!m.ok)throw W(m.status,m.statusText);return m.json()});let i=[];return a==null||a.forEach(async m=>{const{run:n,measurements:s}=await U(f,m);i.push([n,s])}),{project:u,runs:i}},ve=Object.freeze(Object.defineProperty({__proto__:null,load:se},Symbol.toStringTag,{value:"Module"}));function Z(f,e,l){const a=f.slice();return a[1]=e[l],a}function F(f,e,l){const a=f.slice();return a[1]=e[l],a}function G(f){let e,l,a=f[1][0].id+"",u,i,o=f[1][0].short_code+"",m;return{c(){e=T("th"),l=j("ID: "),u=j(a),i=j(", SC: "),m=j(o)},l(n){e=$(n,"TH",{});var s=C(e);l=S(s,"ID: "),u=S(s,a),i=S(s,", SC: "),m=S(s,o),s.forEach(b)},m(n,s){L(n,e,s),h(e,l),h(e,u),h(e,i),h(e,m)},p(n,s){s&1&&a!==(a=n[1][0].id+"")&&B(u,a),s&1&&o!==(o=n[1][0].short_code+"")&&B(m,o)},d(n){n&&b(e)}}}function ie(f){let e,l,a=f[1][0].id+"",u;return{c(){e=T("p"),l=j("no viz for "),u=j(a)},l(i){e=$(i,"P",{});var o=C(e);l=S(o,"no viz for "),u=S(o,a),o.forEach(b)},m(i,o){L(i,e,o),h(e,l),h(e,u)},p(i,o){o&1&&a!==(a=i[1][0].id+"")&&B(u,a)},i:Y,o:Y,d(i){i&&b(e)}}}function ce(f){var z;let e,l,a,u,i=f[1][0].id+"",o,m,n,s,k,E=f[1][0].started_at+"",p,y,c=f[1][0].completed_at+"",D,r,_,t,v;return _=new ne({props:{data:{measurements:f[1][1]},spec:(z=f[1][0].data)==null?void 0:z.vega_lite}}),{c(){e=T("td"),l=T("p"),a=T("a"),u=j("Run "),o=j(i),n=H(),s=T("p"),k=j("Started at "),p=j(E),y=j(", completed at "),D=j(c),r=H(),ae(_.$$.fragment),t=H(),this.h()},l(g){e=$(g,"TD",{});var d=C(e);l=$(d,"P",{});var P=C(l);a=$(P,"A",{href:!0});var w=C(a);u=S(w,"Run "),o=S(w,i),w.forEach(b),P.forEach(b),n=I(d),s=$(d,"P",{});var A=C(s);k=S(A,"Started at "),p=S(A,E),y=S(A,", completed at "),D=S(A,c),A.forEach(b),r=I(d),le(_.$$.fragment,d),t=I(d),d.forEach(b),this.h()},h(){O(a,"href",m="/testruns/"+f[1][0].id)},m(g,d){L(g,e,d),h(e,l),h(l,a),h(a,u),h(a,o),h(e,n),h(e,s),h(s,k),h(s,p),h(s,y),h(s,D),h(e,r),re(_,e,null),h(e,t),v=!0},p(g,d){var w;(!v||d&1)&&i!==(i=g[1][0].id+"")&&B(o,i),(!v||d&1&&m!==(m="/testruns/"+g[1][0].id))&&O(a,"href",m),(!v||d&1)&&E!==(E=g[1][0].started_at+"")&&B(p,E),(!v||d&1)&&c!==(c=g[1][0].completed_at+"")&&B(D,c);const P={};d&1&&(P.data={measurements:g[1][1]}),d&1&&(P.spec=(w=g[1][0].data)==null?void 0:w.vega_lite),_.$set(P)},i(g){v||(R(_.$$.fragment,g),v=!0)},o(g){V(_.$$.fragment,g),v=!1},d(g){g&&b(e),oe(_)}}}function J(f){let e,l,a,u;const i=[ce,ie],o=[];function m(n,s){var k;return(k=n[1][0].data)!=null&&k.vega_lite?0:1}return e=m(f),l=o[e]=i[e](f),{c(){l.c(),a=N()},l(n){l.l(n),a=N()},m(n,s){o[e].m(n,s),L(n,a,s),u=!0},p(n,s){let k=e;e=m(n),e===k?o[e].p(n,s):(Q(),V(o[k],1,1,()=>{o[k]=null}),K(),l=o[e],l?l.p(n,s):(l=o[e]=i[e](n),l.c()),R(l,1),l.m(a.parentNode,a))},i(n){u||(R(l),u=!0)},o(n){V(l),u=!1},d(n){n&&b(a),o[e].d(n)}}}function fe(f){let e,l,a="Compare testruns",u,i,o,m,n,s,k,E=q(f[0].runs),p=[];for(let r=0;r<E.length;r+=1)p[r]=G(F(f,E,r));let y=q(f[0].runs),c=[];for(let r=0;r<y.length;r+=1)c[r]=J(Z(f,y,r));const D=r=>V(c[r],1,1,()=>{c[r]=null});return{c(){e=T("div"),l=T("h2"),l.textContent=a,u=H(),i=T("table"),o=T("thead");for(let r=0;r<p.length;r+=1)p[r].c();m=H(),n=T("tbody"),s=T("tr");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=$(r,"DIV",{class:!0});var _=C(e);l=$(_,"H2",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-2ihjxu"&&(l.textContent=a),u=I(_),i=$(_,"TABLE",{class:!0});var t=C(i);o=$(t,"THEAD",{});var v=C(o);for(let d=0;d<p.length;d+=1)p[d].l(v);v.forEach(b),m=I(t),n=$(t,"TBODY",{});var z=C(n);s=$(z,"TR",{});var g=C(s);for(let d=0;d<c.length;d+=1)c[d].l(g);g.forEach(b),z.forEach(b),t.forEach(b),_.forEach(b),this.h()},h(){O(l,"class","h2"),O(i,"class","table table-hover"),O(e,"class","container mx-auto p-8 space-y-8")},m(r,_){L(r,e,_),h(e,l),h(e,u),h(e,i),h(i,o);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(o,null);h(i,m),h(i,n),h(n,s);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(s,null);k=!0},p(r,[_]){if(_&1){E=q(r[0].runs);let t;for(t=0;t<E.length;t+=1){const v=F(r,E,t);p[t]?p[t].p(v,_):(p[t]=G(v),p[t].c(),p[t].m(o,null))}for(;t<p.length;t+=1)p[t].d(1);p.length=E.length}if(_&1){y=q(r[0].runs);let t;for(t=0;t<y.length;t+=1){const v=Z(r,y,t);c[t]?(c[t].p(v,_),R(c[t],1)):(c[t]=J(v),c[t].c(),R(c[t],1),c[t].m(s,null))}for(Q(),t=y.length;t<c.length;t+=1)D(t);K()}},i(r){if(!k){for(let _=0;_<y.length;_+=1)R(c[_]);k=!0}},o(r){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)V(c[_]);k=!1},d(r){r&&b(e),M(p,r),M(c,r)}}}function _e(f,e,l){let{data:a}=e;return f.$$set=u=>{"data"in u&&l(0,a=u.data)},[a]}class be extends ee{constructor(e){super(),te(this,e,_e,fe,X,{data:0})}}export{be as component,ve as universal};
