import{q as U}from"../chunks/helpers.50b9d48d.js";import{e as W}from"../chunks/index.f836e1a8.js";import{s as X,f as T,a as H,g as $,h as D,Z as x,c as I,d as b,j as O,i as q,B as h,a0 as M,l as j,m as S,n as B,e as N,r as Y}from"../chunks/scheduler.478a93c1.js";import{S as ee,i as te,a as R,c as K,t as V,g as Q,b as ae,d as le,m as re,e as ne}from"../chunks/index.3abb605e.js";import{e as L}from"../chunks/navigation.cd2f1582.js";import{V as oe}from"../chunks/VegaLite.1ba19734.js";const se=async({fetch:u,url:e})=>{var p;let a=e.searchParams.get("id"),l=(p=e.searchParams.get("testruns"))==null?void 0:p.split(",").sort();const _=await u("/api/projects/"+a).then(r=>{if(!r.ok)throw W(r.status,r.statusText);return r.json()});let i=[];if(l)for(var o of l){const{run:r,measurements:s}=await U(u,o);i.push({run:r,measurements:s})}return{project:_,runs:i}},ge=Object.freeze(Object.defineProperty({__proto__:null,load:se},Symbol.toStringTag,{value:"Module"}));function Z(u,e,a){const l=u.slice();return l[1]=e[a],l}function F(u,e,a){const l=u.slice();return l[1]=e[a],l}function G(u){let e,a,l=u[1].run.id+"",_,i,o=u[1].run.short_code+"",p;return{c(){e=T("th"),a=j("ID: "),_=j(l),i=j(", SC: "),p=j(o)},l(r){e=$(r,"TH",{});var s=D(e);a=S(s,"ID: "),_=S(s,l),i=S(s,", SC: "),p=S(s,o),s.forEach(b)},m(r,s){q(r,e,s),h(e,a),h(e,_),h(e,i),h(e,p)},p(r,s){s&1&&l!==(l=r[1].run.id+"")&&B(_,l),s&1&&o!==(o=r[1].run.short_code+"")&&B(p,o)},d(r){r&&b(e)}}}function ie(u){let e,a,l=u[1].run.id+"",_;return{c(){e=T("p"),a=j("no viz for "),_=j(l)},l(i){e=$(i,"P",{});var o=D(e);a=S(o,"no viz for "),_=S(o,l),o.forEach(b)},m(i,o){q(i,e,o),h(e,a),h(e,_)},p(i,o){o&1&&l!==(l=i[1].run.id+"")&&B(_,l)},i:Y,o:Y,d(i){i&&b(e)}}}function ce(u){var z;let e,a,l,_,i=u[1].run.id+"",o,p,r,s,k,E=u[1].run.started_at+"",m,C,c=u[1].run.completed_at+"",P,n,f,t,g;return f=new oe({props:{data:{measurements:u[1].measurements},spec:(z=u[1].run.data)==null?void 0:z.vega_lite}}),{c(){e=T("td"),a=T("p"),l=T("a"),_=j("Run "),o=j(i),r=H(),s=T("p"),k=j("Started at "),m=j(E),C=j(", completed at "),P=j(c),n=H(),ae(f.$$.fragment),t=H(),this.h()},l(v){e=$(v,"TD",{});var d=D(e);a=$(d,"P",{});var y=D(a);l=$(y,"A",{href:!0});var w=D(l);_=S(w,"Run "),o=S(w,i),w.forEach(b),y.forEach(b),r=I(d),s=$(d,"P",{});var A=D(s);k=S(A,"Started at "),m=S(A,E),C=S(A,", completed at "),P=S(A,c),A.forEach(b),n=I(d),le(f.$$.fragment,d),t=I(d),d.forEach(b),this.h()},h(){O(l,"href",p="/testruns/"+u[1].run.id)},m(v,d){q(v,e,d),h(e,a),h(a,l),h(l,_),h(l,o),h(e,r),h(e,s),h(s,k),h(s,m),h(s,C),h(s,P),h(e,n),re(f,e,null),h(e,t),g=!0},p(v,d){var w;(!g||d&1)&&i!==(i=v[1].run.id+"")&&B(o,i),(!g||d&1&&p!==(p="/testruns/"+v[1].run.id))&&O(l,"href",p),(!g||d&1)&&E!==(E=v[1].run.started_at+"")&&B(m,E),(!g||d&1)&&c!==(c=v[1].run.completed_at+"")&&B(P,c);const y={};d&1&&(y.data={measurements:v[1].measurements}),d&1&&(y.spec=(w=v[1].run.data)==null?void 0:w.vega_lite),f.$set(y)},i(v){g||(R(f.$$.fragment,v),g=!0)},o(v){V(f.$$.fragment,v),g=!1},d(v){v&&b(e),ne(f)}}}function J(u){let e,a,l,_;const i=[ce,ie],o=[];function p(r,s){var k;return(k=r[1].run.data)!=null&&k.vega_lite?0:1}return e=p(u),a=o[e]=i[e](u),{c(){a.c(),l=N()},l(r){a.l(r),l=N()},m(r,s){o[e].m(r,s),q(r,l,s),_=!0},p(r,s){let k=e;e=p(r),e===k?o[e].p(r,s):(Q(),V(o[k],1,1,()=>{o[k]=null}),K(),a=o[e],a?a.p(r,s):(a=o[e]=i[e](r),a.c()),R(a,1),a.m(l.parentNode,l))},i(r){_||(R(a),_=!0)},o(r){V(a),_=!1},d(r){r&&b(l),o[e].d(r)}}}function ue(u){let e,a,l="Compare testruns",_,i,o,p,r,s,k,E=L(u[0].runs),m=[];for(let n=0;n<E.length;n+=1)m[n]=G(F(u,E,n));let C=L(u[0].runs),c=[];for(let n=0;n<C.length;n+=1)c[n]=J(Z(u,C,n));const P=n=>V(c[n],1,1,()=>{c[n]=null});return{c(){e=T("div"),a=T("h2"),a.textContent=l,_=H(),i=T("table"),o=T("thead");for(let n=0;n<m.length;n+=1)m[n].c();p=H(),r=T("tbody"),s=T("tr");for(let n=0;n<c.length;n+=1)c[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var f=D(e);a=$(f,"H2",{class:!0,"data-svelte-h":!0}),x(a)!=="svelte-2ihjxu"&&(a.textContent=l),_=I(f),i=$(f,"TABLE",{class:!0});var t=D(i);o=$(t,"THEAD",{});var g=D(o);for(let d=0;d<m.length;d+=1)m[d].l(g);g.forEach(b),p=I(t),r=$(t,"TBODY",{});var z=D(r);s=$(z,"TR",{});var v=D(s);for(let d=0;d<c.length;d+=1)c[d].l(v);v.forEach(b),z.forEach(b),t.forEach(b),f.forEach(b),this.h()},h(){O(a,"class","h2"),O(i,"class","table table-hover"),O(e,"class","container mx-auto p-8 space-y-8")},m(n,f){q(n,e,f),h(e,a),h(e,_),h(e,i),h(i,o);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(o,null);h(i,p),h(i,r),h(r,s);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(s,null);k=!0},p(n,[f]){if(f&1){E=L(n[0].runs);let t;for(t=0;t<E.length;t+=1){const g=F(n,E,t);m[t]?m[t].p(g,f):(m[t]=G(g),m[t].c(),m[t].m(o,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=E.length}if(f&1){C=L(n[0].runs);let t;for(t=0;t<C.length;t+=1){const g=Z(n,C,t);c[t]?(c[t].p(g,f),R(c[t],1)):(c[t]=J(g),c[t].c(),R(c[t],1),c[t].m(s,null))}for(Q(),t=C.length;t<c.length;t+=1)P(t);K()}},i(n){if(!k){for(let f=0;f<C.length;f+=1)R(c[f]);k=!0}},o(n){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)V(c[f]);k=!1},d(n){n&&b(e),M(m,n),M(c,n)}}}function fe(u,e,a){let{data:l}=e;return u.$$set=_=>{"data"in _&&a(0,l=_.data)},[l]}class be extends ee{constructor(e){super(),te(this,e,fe,ue,X,{data:0})}}export{be as component,ge as universal};
