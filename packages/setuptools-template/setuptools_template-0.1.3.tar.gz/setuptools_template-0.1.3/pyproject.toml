[build-system]
# requires = ["setuptools", "setuptools-scm", "wheel"]
requires = ["setuptools", "wheel", "twine", "flake8-pyproject"]
build-backend = "setuptools.build_meta"

# 动态获取 git tag最新的值最为build的版本号, 此时setup.py里面的version字段要删除
# [tool.setuptools_scm]
# version_scheme = "post-release"
# local_scheme = "dirty-tag"

[project]
name = "setuptools_template"
version = "0.1.3"
authors = [{ name = "lgf4591", email = "lgf4591@outlook.com" }]
maintainers = [{ name = "lgf4591", email = "lgf4591@outlook.com" }]
description = "A python package template by using setuptools"
# readme = "README.md"
readme = { file = "README.md", content-type = "text/markdown" }
# readme = {file = "README.rst", content-type = "text/x-rst"}
requires-python = ">=3.8"
keywords = ["setuptools", "template"]
# license = "MIT"
license = { text = "MIT" }
# license = {file = "LICENSE"}
classifiers = [
	"Development Status :: 4 - Beta",
	"License :: OSI Approved :: MIT License",
	"Programming Language :: Python :: 3.8",
	"Programming Language :: Python :: 3.9",
	"Programming Language :: Python :: 3.10",
	"Programming Language :: Python :: 3.11",
	"Programming Language :: Python :: 3.12",
]


dependencies = ["importlib-metadata"]
# dynamic = ["version"]

[project.scripts]
template = "setuptools_template.main:main"

[project.urls]
Homepage = "https://github.com/lgf4591/setuptools_template"
Documentation = "https://github.com/lgf4591/setuptools_template/blob/master/README.md"
Repository = "https://github.com/lgf4591/setuptools_template.git"
Issues = "https://github.com/lgf4591/setuptools_template/issues"
Changelog = "https://github.com/lgf4591/setuptools_template/blob/master/CHANGELOG.md"

[project.optional-dependencies]
test = ["pytest", "pytest-cov", "coverage"]
lint = ["flake8", "mypy"]
format = ["black", "isort"]
docs = ["mkdocs"]
all = [
	"pytest",
	"pytest-cov",
	"coverage",
	"flake8",
	"mypy",
	"black",
	"isort",
	"mkdocs",
]

[tool.mypy]
# python_version = "3.8"
strict_optional = true
check_untyped_defs = true
warn_unused_configs = true

[[tool.mypy.overrides]]
module = ["somelibrary", "some_other_library"]
ignore_missing_imports = true

[tool.flake8]
max-line-length = 120
count = true
extend-ignore = [
	# E203 and W503 are incompatible with Black
	"E203",
	"W503",
	# blank line at end of file
	"W391",
]

[tool.black]
line-length = 120
skip-string-normalization = true
target-version = ['py38', 'py39', 'py310', 'py311', 'py312']

[tool.isort]
profile = "black"
line_length = 120

[tool.pytest.ini_options]
testpaths = ["tests"]
addopts = "--cov=setuptools_template --cov-report=term-missing"
