"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[756],{9158:function(t,e,s){var i=this&&this.__createBinding||(Object.create?function(t,e,s,i){void 0===i&&(i=s);var r=Object.getOwnPropertyDescriptor(e,s);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,i,r)}:function(t,e,s,i){void 0===i&&(i=s),t[i]=e[s]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&i(e,t,s);return r(e,t),e},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.QuickFilter=e.AutoComplete=e.name=void 0,e.name="AutoComplete";const o=l(s(1914)),n=l(s(2972)),h=s(9281),u=s(1230),p=a(s(1300));let c;c={prAutoComplete:Promise.resolve().then((()=>a(s(9682))))};(0,h.RegisterImportPool)(c);class d extends u.LeafComponentInput{constructor(t){super(t),this.onKeyDown=t=>{"ArrowDown"!==t.key&&"ArrowUp"!==t.key||(this.inputEl&&!this.inputEl.state.overlayVisible&&(this.state.rows.length||this.getChoices(this.state[p.URL_PARAM_FILTER]),this.inputEl.setState({overlayVisible:!0})),t.stopPropagation())},this.itemTemplate=t=>{let e="object"==typeof t?t.text:t;return o.default.createElement("div",{dangerouslySetInnerHTML:{__html:e||"Â "}})},this.getChoices=(t,e)=>{let s=(e=e||this.state[p.URL_PARAM_LIMIT])===this.state[p.URL_PARAM_LIMIT]?this.state[p.URL_PARAM_START]:this.state[p.URL_PARAM_LIMIT];this.props.urlParams.controller.actionHandler.silentFetch({path:this.choicesURL(t,s,e)}).then((s=>{this.setState({[p.URL_PARAM_FILTER]:t,[p.URL_PARAM_LIMIT]:e,count:s.count,lazyLoading:!1,rows:this.state.rows.concat(s.rows)})}))},this.state={...this.state,[p.URL_PARAM_FILTER]:"",[p.URL_PARAM_LIMIT]:15,[p.URL_PARAM_START]:0,lazyLoading:!1,rows:[],value:null},this.hasClearButton=!1,this.getChoices=this.getChoices.bind(this),this.getInput=this.getInput.bind(this),this.itemTemplate=this.itemTemplate.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}onReady(){if(this.hasClearButton&&!this.clear)throw"clear NotImplemented";let t=this.getValue();this.setState({[p.URL_PARAM_FILTER]:t.text,[p.URL_PARAM_LIMIT]:this.props.urlParams[p.URL_PARAM_LIMIT],value:t})}getInput(t={}){return null===this.state.value?null:o.default.createElement(o.default.Fragment,null,o.default.createElement(this.ex.prAutoComplete.AutoComplete,{completeMethod:t=>this.getChoices(t.query,this.state[p.URL_PARAM_LIMIT]),dropdown:!0,field:"text",itemTemplate:this.itemTemplate,onChange:t=>this.setState({value:Object.assign(this.state.value,{text:t.value,value:null}),rows:[],[p.URL_PARAM_LIMIT]:this.props.urlParams[p.URL_PARAM_LIMIT]}),onSelect:this.onSelect,onShowLoader:()=>{this.clearButton&&(this.clearButton.style.visibility="hidden")},ref:t=>this.inputEl=t,suggestions:this.state.rows,tabIndex:this.props.tabIndex,value:this.state.value.text,virtualScrollerOptions:{itemSize:this.props.urlParams[p.URL_PARAM_LIMIT],lazy:!0,loading:this.state.lazyLoading,onScrollIndexChange:t=>{let e=this.state[p.URL_PARAM_LIMIT];e-t.first<15&&!this.state.lazyLoading&&this.state.count>e&&(this.setState({lazyLoading:!0}),this.getChoices(this.state[p.URL_PARAM_FILTER],e+15))},ref:t=>this.scroller=t,scrollHeight:"200px"},...t}),this.hasClearButton&&this.props.elem.field_options.allowBlank&&this.state.value.text&&o.default.createElement("i",{key:this.state.touch,ref:t=>this.clearButton=t,className:"pi pi-times l-fk-clear",onClick:this.clear,style:{visibility:"visible",cursor:"pointer"}}))}}e.AutoComplete=d,d.requiredModules=["prAutoComplete"].concat(u.LeafComponentInput.requiredModules),d.iPool=Object.assign(c,u.LeafComponentInput.iPool.copy());class _ extends d{constructor(t){super(t),this.wrapperClasses=["l-grid-quickfilter"],this.styleClasses=[],this.choicesURL=this.choicesURL.bind(this),this.getInput=this.getInput.bind(this),this.getValue=this.getValue.bind(this),this.onSelect=this.onSelect.bind(this)}getInput(){return super.getInput({placeholder:"QuickSearch",style:{width:this.props.wide?"100%":void 0,marginRight:this.props.wide?"1ch":void 0,marginLeft:this.props.wide?"1ch":void 0}})}getValue(){return{text:this.props.urlParams[p.URL_PARAM_FILTER],value:null}}choicesURL(t,e,s){return`choices/${this.props.urlParams.packId}/${this.props.urlParams.actorId}?${this.ex.queryString.stringify(Object.assign(this.props.urlParams.controller.actionHandler.defaultStaticParams(),{[p.URL_PARAM_FILTER]:t,[p.URL_PARAM_START]:e,[p.URL_PARAM_LIMIT]:s}))}`}onSelect(t){let e=t.value.value,s=this.props.urlParams.controller;s.history.pushPath({pathname:`/api/${this.props.urlParams.packId}/${this.props.urlParams.actorId}/${e}`,params:s.actionHandler.defaultStaticParams()})}render(){return this.state.ready?this.getInput():null}}e.QuickFilter=_,_.propTypes={...d.propTypes,wide:n.default.bool},_.defaultProps={...d.defaultProps,editing_mode:!0,elem:{},tabIndex:0,wide:!1,[p.URL_PARAM_WINDOW_TYPE]:p.WINDOW_TYPE_INSERT}},5223:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(9430);function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,s){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,i.Z)(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(arguments.length<3?t:s):a.value}},r.apply(this,arguments)}}}]);
//# sourceMappingURL=main.AutoComplete_LinoToolbar.c9b7687ed2c66226a733.js.map