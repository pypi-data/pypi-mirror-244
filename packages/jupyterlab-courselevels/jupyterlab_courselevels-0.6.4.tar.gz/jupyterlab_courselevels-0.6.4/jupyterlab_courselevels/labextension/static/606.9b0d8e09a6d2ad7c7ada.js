"use strict";(self.webpackChunkjupyterlab_courselevels=self.webpackChunkjupyterlab_courselevels||[]).push([[606],{606:(e,o,t)=>{t.r(o),t.d(o,{default:()=>g});var l=t(308),a=t(122),n=t(190),s=t(717),c=t(838);const d="````",r=(e,o)=>{const t=null==e?void 0:e.activeCell;if(void 0===t)return;const l=null==t?void 0:t.model;if(void 0===l)return;a.NotebookActions.changeCellType(e,"markdown");let n=l.sharedModel.getSource();for(;n.endsWith("\n");)n=n.slice(0,-1);const s=n.startsWith(d);console.debug("admonition: turning_off",s);const c=e=>{const o=e.split("\n");for(;0!==o.length&&o[0].match(/^\s*$/);)o.shift();for(;0!==o.length&&o[o.length-1].match(/^\s*$/);)o.pop();return o.join("\n")};let r;r=s?c(n.replace(RegExp(`^${d} *{[a-zA-Z]+}`),"").replace(RegExp(`\n${d}$`),"")):`${d}{${o}}\n${c(n)}\n${d}`,l.sharedModel.setSource(r)},i="jupyterlab-courselevels:plugin",m=e=>{console.log("Cleaning metadata for cell",e),!0===e.model.getMetadata("editable")&&(0,c.md_unset)(e,"editable");const o=e.model.getMetadata("tags");0===(null==o?void 0:o.length)&&(0,c.md_unset)(e,"tags"),""===(0,c.md_get)(e,"slideshow.slide_type")&&(0,c.md_unset)(e,"slideshow.slide_type");const t=(0,c.md_get)(e,"slideshow");void 0!==t&&"{}"===JSON.stringify(t)&&(0,c.md_unset)(e,"slideshow");const l=(0,c.md_get)(e,"user_expressions");0===(null==l?void 0:l.length)&&(0,c.md_unset)(e,"user_expressions")},u=["basic","intermediate","advanced"],g={id:i,autoStart:!0,requires:[l.ICommandPalette,a.INotebookTracker,n.ISettingRegistry],activate:(e,o,t,a)=>{console.log("extension jupyterlab-courselevels is activating");let[n]=[!1];const d=u.map((e=>`level_${e}`)),g=e=>{(0,c.apply_on_cells)(t,c.Scope.Active,(o=>{((e,o)=>{const t=`level_${o}`;(0,c.md_toggle_multi)(e,"tags",t,d)})(o,e)}))};let p;for(const[t,l]of[["basic","Ctrl X"],["intermediate","Ctrl Y"],["advanced","Ctrl Z"]])p=`courselevels:toggle-level-${t}`,e.commands.addCommand(p,{label:`toggle ${t} level`,execute:()=>g(t)}),o.addItem({command:p,category:"courselevels"}),e.commands.addKeyBinding({command:p,keys:["Ctrl \\",l],selector:".jp-Notebook"});const v=()=>{(0,c.apply_on_cells)(t,c.Scope.Active,(e=>{(0,c.md_toggle)(e,"tags","framed_cell")}))};p="courselevels:toggle-frame",e.commands.addCommand(p,{label:"toggle frame",execute:()=>v()}),o.addItem({command:p,category:"courselevels"}),e.commands.addKeyBinding({command:p,keys:["Ctrl \\","Ctrl M"],selector:".jp-Notebook"}),p="courselevels:toggle-licence",e.commands.addCommand(p,{label:"toggle licence",execute:()=>{(0,c.apply_on_cells)(t,c.Scope.Active,(e=>{(0,c.md_toggle)(e,"tags","licence")}))}}),o.addItem({command:p,category:"courselevels"}),e.commands.addKeyBinding({command:p,keys:["Ctrl \\","Ctrl L"],selector:".jp-Notebook"}),p="courselevels:metadata-clean-selected",e.commands.addCommand(p,{label:"clean metadata for all selected cells",execute:()=>(0,c.apply_on_cells)(t,c.Scope.Multiple,m)}),o.addItem({command:p,category:"courselevels"}),e.commands.addKeyBinding({command:p,keys:["Alt Cmd 7"],selector:".jp-Notebook"}),p="courselevels:metadata-clean-all",e.commands.addCommand(p,{label:"clean metadata for all cells",execute:()=>(0,c.apply_on_cells)(t,c.Scope.All,m)}),o.addItem({command:p,category:"courselevels"}),e.commands.addKeyBinding({command:p,keys:["Ctrl Alt 7"],selector:".jp-Notebook"});for(const[l,a]of[["admonition","Ctrl A"],["tip","Ctrl T"],["note","Ctrl N"],["attention",null],["caution",null],["danger",null],["error",null],["hint",null],["important",null],["seealso",null],["warning",null]]){const n=l;p="courselevels:toggle-admonition";let s="toggle admonition";"admonition"!==n&&(p+=`-${n}`,s+=` ${n}`),e.commands.addCommand(p,{label:s,execute:()=>{var e;const o=null===(e=t.currentWidget)||void 0===e?void 0:e.content;void 0!==o&&r(o,n)}}),o.addItem({command:p,category:"courselevels"}),null!==a&&e.commands.addKeyBinding({command:p,keys:["Ctrl \\",a],selector:".jp-Notebook"})}function b(o){n=o.get("show_level_buttons").composite,console.log(`jupyterlab-courselevels extension: show_level_buttons is set to ${n}`),n&&(()=>{const o=e=>{let o=0;for(const t of e.toolbar.children()){if(t.node.classList.contains("jp-Toolbar-spacer"))return o;o+=1}return 0};e.docRegistry.addWidgetExtension("Notebook",new class{createNew(e,t){const a=new l.ToolbarButton({className:"courselevels-button",iconClass:"far fa-hand-pointer",onClick:()=>g("basic"),tooltip:"Toggle basic level"}),n=o(e);return e.toolbar.insertItem(n,"basicLevel",a),new s.DisposableDelegate((()=>{a.dispose()}))}}),e.docRegistry.addWidgetExtension("Notebook",new class{createNew(e,t){const a=new l.ToolbarButton({className:"courselevels-button",iconClass:"far fa-hand-peace",onClick:()=>g("intermediate"),tooltip:"Toggle intermediate level"}),n=o(e);return e.toolbar.insertItem(n,"intermediateLevel",a),new s.DisposableDelegate((()=>{a.dispose()}))}}),e.docRegistry.addWidgetExtension("Notebook",new class{createNew(e,t){const a=new l.ToolbarButton({className:"courselevels-button",iconClass:"far fa-hand-spock",onClick:()=>g("advanced"),tooltip:"Toggle advanced level"}),n=o(e);return e.toolbar.insertItem(n,"advancedLevel",a),new s.DisposableDelegate((()=>{a.dispose()}))}}),e.docRegistry.addWidgetExtension("Notebook",new class{createNew(e,t){const a=new l.ToolbarButton({className:"courselevels-button",iconClass:"fas fa-crop-alt",onClick:()=>v(),tooltip:"Toggle frame around cell"}),n=o(e);return e.toolbar.insertItem(n,"frameLevel",a),new s.DisposableDelegate((()=>{a.dispose()}))}})})()}Promise.all([e.restored,a.load(i)]).then((([e,o])=>{b(o),o.changed.connect(b)}))}}}}]);