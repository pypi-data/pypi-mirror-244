version: "3"
tasks:
  default:
    cmds:
      - task --list-all

  clean:
    desc: Cleaning up...
    cmds:
      # - rm *.retry || true
      # - rm -rf ./nalibs/__pycache__/ || true
      - find . -name '*.py[co]' -delete
      - rm -rf ./dist
      # rm -rf ./build ./dist ./nalibs.egg-info

  init-env:
    desc: init local python venv
    cmds:
      - rm -rf env/
      - python3 -m venv --prompt '|> nalibs-example <|' env
      # - source ./env/bin/activate; env/bin/pip install -r requirements.txt

  init-pypi-tool:
    desc: init local pypi tools
    cmd: source ./env/bin/activate; python3 -m pip install --upgrade build twine

  pypi-package:
    cmd: source ./env/bin/activate; python3 -m build
  pypi-publish:
    cmd: source ./env/bin/activate; python3 -m twine upload dist/* --verbose

# source ./env/bin/activate pip install nalibs-example==0.0.1
# python3
# from nalibs_example import example
