[tool.poetry]
name = "syndb-api"
version = "0.1.0"
description = "SynDB FastAPI for user management"
authors = ["Can H. Tartanoglu <canhtart@gmail.com>"]
license = "GPLv3"
readme = "README.md"
packages = [{include = "syndb_api"}]

[tool.poetry.dependencies]
python = ">=3.10, <3.12"
asyncio = "*"
pydantic = "^2.0.0"
pydantic-settings = "^2.0.3"

# packages owned by memorycircuits
syndb-constants = "*"
syndb-cassandra = "*"
neurometa = "^1.1.1"
# ================

uvicorn = { version = "*", extras = [ "standard" ] }

inflection = "^0.5.1"

fastapi = "^0.104.0"
brotli-asgi = "^1.3.0"
httpx = "^0.23.3"

fastapi-users = { version = "^12", extras = ["sqlalchemy", "oauth"] }
asyncpg = "*"

passlib = {version = "^1.7.4", extras = ["argon2"]}

uuid6 = "*"
aioboto3 = "^12.0.0"
python-multipart = "^0.0.6"

[tool.poetry.group.dev.dependencies]
alembic = "^1.10.4"
aiosqlite = "^0.17.0"
asgi-lifespan = "^2.0.0"
ruamel-yaml = "^0.17.40"

[tool.poetry.group.test.dependencies]
pytest = "*"
pytest-asyncio = "*"
pytest-env = "^0.6.2"
syndb-data = { path = "../../interface/syndb-data", extras = ["client"] }

[tool.poetry.group.format.dependencies]
black = "*"
isort = "*"
ruff = "*"

[tool.pytest.ini_options]
# https://github.com/MobileDynasty/pytest-env/issues/15
env = [
    "postgres_path=/syndb_test",
    "postgres_username=syndb",
    "postgres_password=syndb",
    "TESTING=1",
]

[tool.isort]
line_length = 120
profile = "black"

[tool.black]
line-length = 120
target-version = ["py311"]

[tool.ruff]
line-length = 120
ignore-init-module-imports = true

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"
