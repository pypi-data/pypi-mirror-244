{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from\"react\";import ModelCard from\"./modelCard\";import Title from\"../../components/Title\";import{Box,TextField,FormControl,Select,MenuItem,InputLabel,Tabs,Tab}from\"@mui/material\";import{ApiContext}from\"../../components/apiContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LaunchLLM=function LaunchLLM(){var endPoint=useContext(ApiContext).endPoint;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),registrationData=_useState2[0],setRegistrationData=_useState2[1];var _useContext=useContext(ApiContext),isCallingApi=_useContext.isCallingApi,setIsCallingApi=_useContext.setIsCallingApi;var _useContext2=useContext(ApiContext),isUpdatingModel=_useContext2.isUpdatingModel;// States used for filtering\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var _useState5=useState(\"all\"),_useState6=_slicedToArray(_useState5,2),modelAbility=_useState6[0],setModelAbility=_useState6[1];var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),tabValue=_React$useState2[0],setTabValue=_React$useState2[1];var handleTabChange=function handleTabChange(event,newValue){setTabValue(newValue);};var handleChange=function handleChange(event){setSearchTerm(event.target.value);};var handleAbilityChange=function handleAbilityChange(event){setModelAbility(event.target.value);};var filter=function filter(registration){if(!registration||typeof searchTerm!==\"string\")return false;var modelName=registration.model_name?registration.model_name.toLowerCase():\"\";var modelDescription=registration.model_description?registration.model_description.toLowerCase():\"\";if(!modelName.includes(searchTerm.toLowerCase())&&!modelDescription.includes(searchTerm.toLowerCase())){return false;}if(modelAbility&&modelAbility!==\"all\"){if(registration.model_ability.indexOf(modelAbility)<0){return false;}}return true;};var update=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,registrations;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(isCallingApi||isUpdatingModel)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;setIsCallingApi(true);_context.next=6;return fetch(\"\".concat(endPoint,\"/v1/model_registrations/LLM?detailed=true\"),{method:\"GET\"});case 6:response=_context.sent;_context.next=9;return response.json();case 9:registrations=_context.sent;setRegistrationData(registrations);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);console.error(\"Error:\",_context.t0);case 16:_context.prev=16;setIsCallingApi(false);return _context.finish(16);case 19:case\"end\":return _context.stop();}},_callee,null,[[2,13,16,19]]);}));return function update(){return _ref.apply(this,arguments);};}();useEffect(function(){update();// eslint-disable-next-line\n},[]);var style={display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(300px, 1fr))\",paddingLeft:\"2rem\",gridGap:\"2rem 0rem\"};function a11yProps(index){return{id:\"simple-tab-\".concat(index),\"aria-controls\":\"simple-tabpanel-\".concat(index)};}return/*#__PURE__*/_jsxs(Box,{m:\"20px\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"150px 1fr\",columnGap:\"20px\",margin:\"30px 2rem\"},children:[/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"ability-select-label\",children:\"Model Ability\"}),/*#__PURE__*/_jsxs(Select,{id:\"ability\",labelId:\"ability-select-label\",label:\"Model Ability\",onChange:handleAbilityChange,value:modelAbility,size:\"small\",sx:{width:\"150px\"},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"all\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"generate\",children:\"generate\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"chat\",children:\"chat\"})]})]}),/*#__PURE__*/_jsx(FormControl,{variant:\"outlined\",margin:\"normal\",children:/*#__PURE__*/_jsx(TextField,{id:\"search\",type:\"search\",label:\"Search for model name and description\",value:searchTerm,onChange:handleChange,size:\"small\"})})]}),/*#__PURE__*/_jsx(\"div\",{style:style,children:registrationData.filter(function(registration){return filter(registration);}).map(function(filteredRegistration){return/*#__PURE__*/_jsx(ModelCard,{url:endPoint,modelData:filteredRegistration});})})]});};export default LaunchLLM;","map":{"version":3,"names":["React","useContext","useState","useEffect","ModelCard","Title","Box","TextField","FormControl","Select","MenuItem","InputLabel","Tabs","Tab","ApiContext","jsx","_jsx","jsxs","_jsxs","LaunchLLM","endPoint","_useState","_useState2","_slicedToArray","registrationData","setRegistrationData","_useContext","isCallingApi","setIsCallingApi","_useContext2","isUpdatingModel","_useState3","_useState4","searchTerm","setSearchTerm","_useState5","_useState6","modelAbility","setModelAbility","_React$useState","_React$useState2","tabValue","setTabValue","handleTabChange","event","newValue","handleChange","target","value","handleAbilityChange","filter","registration","modelName","model_name","toLowerCase","modelDescription","model_description","includes","model_ability","indexOf","update","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","registrations","wrap","_callee$","_context","prev","next","abrupt","fetch","concat","method","sent","json","t0","console","error","finish","stop","apply","arguments","style","display","gridTemplateColumns","paddingLeft","gridGap","a11yProps","index","id","m","children","columnGap","margin","variant","labelId","label","onChange","size","sx","width","type","map","filteredRegistration","url","modelData"],"sources":["/home/runner/work/inference/inference/xinference/web/ui/src/scenes/launch_model/launchLLM.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport ModelCard from \"./modelCard\";\nimport Title from \"../../components/Title\";\nimport {\n  Box,\n  TextField,\n  FormControl,\n  Select,\n  MenuItem,\n  InputLabel,\n  Tabs,\n  Tab,\n} from \"@mui/material\";\nimport { ApiContext } from \"../../components/apiContext\";\n\nconst LaunchLLM = () => {\n  let endPoint = useContext(ApiContext).endPoint;\n  const [registrationData, setRegistrationData] = useState([]);\n  const { isCallingApi, setIsCallingApi } = useContext(ApiContext);\n  const { isUpdatingModel } = useContext(ApiContext);\n\n  // States used for filtering\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const [modelAbility, setModelAbility] = useState(\"all\");\n  const [tabValue, setTabValue] = React.useState(0);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  const handleAbilityChange = (event) => {\n    setModelAbility(event.target.value);\n  };\n\n  const filter = (registration) => {\n    if (!registration || typeof searchTerm !== \"string\") return false;\n    const modelName = registration.model_name\n      ? registration.model_name.toLowerCase()\n      : \"\";\n    const modelDescription = registration.model_description\n      ? registration.model_description.toLowerCase()\n      : \"\";\n\n    if (\n      !modelName.includes(searchTerm.toLowerCase()) &&\n      !modelDescription.includes(searchTerm.toLowerCase())\n    ) {\n      return false;\n    }\n    if (modelAbility && modelAbility !== \"all\") {\n      if (registration.model_ability.indexOf(modelAbility) < 0) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  const update = async () => {\n    if (isCallingApi || isUpdatingModel) return;\n\n    try {\n      setIsCallingApi(true);\n\n      const response = await fetch(\n        `${endPoint}/v1/model_registrations/LLM?detailed=true`,\n        {\n          method: \"GET\",\n        },\n      );\n\n      const registrations = await response.json();\n\n      setRegistrationData(registrations);\n    } catch (error) {\n      console.error(\"Error:\", error);\n    } finally {\n      setIsCallingApi(false);\n    }\n  };\n\n  useEffect(() => {\n    update();\n    // eslint-disable-next-line\n  }, []);\n\n  const style = {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(300px, 1fr))\",\n    paddingLeft: \"2rem\",\n    gridGap: \"2rem 0rem\",\n  };\n\n  function a11yProps(index) {\n    return {\n      id: `simple-tab-${index}`,\n      \"aria-controls\": `simple-tabpanel-${index}`,\n    };\n  }\n\n  return (\n    <Box m=\"20px\">\n      <div\n        style={{\n          display: \"grid\",\n          gridTemplateColumns: \"150px 1fr\",\n          columnGap: \"20px\",\n          margin: \"30px 2rem\",\n        }}\n      >\n        <FormControl variant=\"outlined\" margin=\"normal\">\n          <InputLabel id=\"ability-select-label\">Model Ability</InputLabel>\n          <Select\n            id=\"ability\"\n            labelId=\"ability-select-label\"\n            label=\"Model Ability\"\n            onChange={handleAbilityChange}\n            value={modelAbility}\n            size=\"small\"\n            sx={{ width: \"150px\" }}\n          >\n            <MenuItem value=\"all\">all</MenuItem>\n            <MenuItem value=\"generate\">generate</MenuItem>\n            <MenuItem value=\"chat\">chat</MenuItem>\n          </Select>\n        </FormControl>\n        <FormControl variant=\"outlined\" margin=\"normal\">\n          <TextField\n            id=\"search\"\n            type=\"search\"\n            label=\"Search for model name and description\"\n            value={searchTerm}\n            onChange={handleChange}\n            size=\"small\"\n          />\n        </FormControl>\n      </div>\n      <div style={style}>\n        {registrationData\n          .filter((registration) => filter(registration))\n          .map((filteredRegistration) => (\n            <ModelCard url={endPoint} modelData={filteredRegistration} />\n          ))}\n      </div>\n    </Box>\n  );\n};\n\nexport default LaunchLLM;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}