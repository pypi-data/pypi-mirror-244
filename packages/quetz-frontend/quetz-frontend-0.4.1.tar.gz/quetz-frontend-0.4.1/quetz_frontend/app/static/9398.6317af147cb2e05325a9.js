"use strict";(self["webpackChunk_quetz_frontend_main_app"]=self["webpackChunk_quetz_frontend_main_app"]||[]).push([[9398,420],{6277:(e,a,t)=>{t.d(a,{Z:()=>l});function n(e){var a,t,l="";if(typeof e==="string"||typeof e==="number"){l+=e}else if(typeof e==="object"){if(Array.isArray(e)){for(a=0;a<e.length;a++){if(e[a]){if(t=n(e[a])){l&&(l+=" ");l+=t}}}}else{for(a in e){if(e[a]){l&&(l+=" ");l+=a}}}}return l}function l(){var e=0,a,t,l="";while(e<arguments.length){if(a=arguments[e++]){if(t=n(a)){l&&(l+=" ");l+=t}}}return l}},19398:(e,a,t)=>{t.r(a);t.d(a,{List:()=>f,PaginatedList:()=>b,PaginatedTable:()=>h,Pagination:()=>p,Table:()=>P});var n=t(98078);var l=t(93670);var r=t(6277);var o=t(2411);var s=t(30325);var i=t(5089);var c=t(34494);var g=t(98635);const p=({pageSize:e,pageCount:a,gotoPage:t,canPreviousPage:n,previousPage:l,nextPage:r,canNextPage:p,pageIndex:u,pageOptions:d,setPageSize:m,loading:f,showPagination:b})=>{const S=()=>{if(b){return o.createElement("div",{className:"btn-group"},o.createElement(c.Button,{title:"Go to first page",appearance:"stealth",onClick:()=>t(0),disabled:!n},o.createElement(i.FontAwesomeIcon,{icon:s.faAngleDoubleLeft})),o.createElement(c.Button,{title:"Go to previous page",appearance:"stealth",onClick:()=>l(),disabled:!n},o.createElement(i.FontAwesomeIcon,{icon:s.faAngleLeft})),o.createElement(c.Button,{title:"Go to next page",appearance:"stealth",onClick:()=>r(),disabled:!p},o.createElement(i.FontAwesomeIcon,{icon:s.faAngleRight})),o.createElement(c.Button,{title:"Go to last page",appearance:"stealth",onClick:()=>t(a-1),disabled:!p},o.createElement(i.FontAwesomeIcon,{icon:s.faAngleDoubleRight})))}else{return o.createElement("div",null)}};const E=()=>{if(b){return o.createElement("div",{className:"jp-table-controls-text"},f?o.createElement(g.InlineLoader,null):o.createElement("p",{className:"paragraph padding-text"},"Page"," ",o.createElement("strong",null,u+1," of ",d.length)))}else{return o.createElement("div",null)}};const P=()=>{if(b){return o.createElement("p",{className:"paragraph padding-side"},"Go to page: â€ƒ",o.createElement(c.NumberField,{value:(u+1).toString(),onChange:e=>{const a=e.target.value?Number(e.target.value)-1:0;t(a)},style:{width:"100px",verticalAlign:"middle"}}))}else{return o.createElement("p",null)}};return o.createElement("div",{className:"jp-table-controls"},o.createElement("div",{className:"jp-table-controls-left"},o.createElement(S,null),o.createElement(E,null)),o.createElement("div",{className:"jp-table-controls-right jp-table-controls-text"},o.createElement(P,null),o.createElement("p",{className:"paragraph padding-side"},o.createElement(c.Select,{defaultValue:"25",position:"above",value:e.toString(),onChange:e=>{m(Number(e.target.value))}},["25","50","100"].map((e=>o.createElement(c.Option,{key:e,value:e},"Show ",e)))))))};const u=(e,{column:a})=>m(e,a.align);const d=(e,{cell:a})=>m(e,a.column.align);const m=(e,a="left")=>[e,{style:{justifyContent:a==="right"?"flex-end":"flex-start",alignItems:"flex-start",display:"flex"}}];const f=({columns:e,data:a,to:t,paginated:n,fetchData:s,loading:i,pageCount:c,dataSize:g})=>{const m={width:150};const{getTableProps:f,headerGroups:b,prepareRow:S,rows:E,page:P,canPreviousPage:h,canNextPage:v,pageOptions:x,pageCount:y,gotoPage:C,nextPage:w,previousPage:z,setPageSize:N,state:{pageIndex:k,pageSize:j}}=(0,l.useTable)({columns:e,data:a,defaultColumn:m,initialState:{pageIndex:0},manualPagination:n,pageCount:c},l.useFlexLayout,(e=>{e.allColumns.push((e=>[...e]))}),...n?[l.usePagination]:[]);if(n){o.useEffect((()=>{s({pageIndex:k,pageSize:j})}),[s,k,j])}const I=g>j;return o.createElement(o.Fragment,null,o.createElement("div",Object.assign({},f(),{className:"table"}),o.createElement("div",null,b.map(((e,a)=>o.createElement("div",Object.assign({},e.getHeaderGroupProps({}),{className:"tr",key:a}),e.headers.map((e=>o.createElement("div",Object.assign({},e.getHeaderProps(u),{className:"th",key:e.id}),e.render("Header")))))))),o.createElement("div",{className:"tbody"},((n?P:E)||[]).map((e=>{S(e);return o.createElement("div",Object.assign({},e.getRowProps(),{key:e.id,className:(0,r.Z)("tr","list-row",{clickable:!!t}),onClick:()=>{if(t){t(e.original)}}}),e.cells.map((e=>o.createElement("div",Object.assign({},e.getCellProps(d),{className:"td",key:e.column.id}),e.render("Cell")))))})),o.createElement("div",{className:"tr"},!i&&a.length===0&&o.createElement("div",{className:"padding-bottom padding-top"},"No data available")))),n&&o.createElement(p,{pageSize:j,pageCount:y,gotoPage:C,canPreviousPage:h,previousPage:z,nextPage:w,canNextPage:v,pageIndex:k,pageOptions:x,setPageSize:N,loading:i,showPagination:I}))};const b=({url:e,columns:a,to:t,q:l})=>{const[r,s]=o.useState([]);const[i,c]=o.useState(false);const[g,p]=o.useState(0);const[u,d]=o.useState(0);const m=o.useRef(0);const b=o.useCallback((async({pageSize:a,pageIndex:t})=>{const r=++m.current;c(true);const o=JSON.stringify(Object.assign(Object.assign({},l),{skip:t*a,limit:a}));const i=n.ServerConnection.makeSettings();const g=await n.ServerConnection.makeRequest(`${e}?${o}`,{},i);const u=await g.json();if(u&&r===m.current){s(u.result);d(u.pagination.all_records_count);p(Math.ceil(u.pagination.all_records_count/a));c(false)}}),[]);return o.createElement(f,{columns:a,data:r,to:t,paginated:true,fetchData:b,loading:i,pageCount:g,dataSize:u})};var S=t(25047);const E=({pageSize:e,pageIndex:a,query:t})=>{const n=new URLSearchParams(window.location.search);const l=n.get("index");const r=n.get("size");const o=n.get("query")||"";if(!l&&a===0&&!t){return}if(l!=a||r!=e||o!=t){n.delete("size");n.append("size",e);n.delete("index");n.append("index",a);if(t){n.delete("query");n.append("query",t)}window.history.pushState(null,"","?"+n.toString())}};const P=({columns:e,data:a,dataSize:t,fetchData:n,renderRowSubComponent:s,loading:i,paginated:g,pageIndex:u,pageSize:d,pageCount:m,enableSearch:f,query:b})=>{const S=o.useRef(false);const{getTableProps:E,getTableBodyProps:P,headerGroups:h,prepareRow:v,rows:x,page:y,canPreviousPage:C,canNextPage:w,pageOptions:z,pageCount:N,gotoPage:k,nextPage:j,previousPage:I,setPageSize:O,setGlobalFilter:q,state:{pageIndex:R,pageSize:_,globalFilter:F}}=(0,l.useTable)({columns:e,data:a,initialState:{pageIndex:u,pageSize:d,globalFilter:b},manualPagination:g,autoResetPage:true,pageCount:m,manualGlobalFilter:f,autoResetGlobalFilter:true},...f?[l.useGlobalFilter]:[],l.useExpanded,...g?[l.usePagination]:[]);if(n){const e=(0,l.useAsyncDebounce)(n,100);o.useEffect((()=>{if(S.current){k(0)}S.current=false;e({pageIndex:R,pageSize:_,query:F})}),[e,R,_,F])}const G=t>_;return o.createElement(o.Fragment,null,f&&o.createElement(c.Search,{className:"table-search-input",placeholder:"Search",value:F||"",onChange:e=>{S.current=true;q(e.target.value)}}),o.createElement("table",Object.assign({},E(),{className:"jp-table"}),o.createElement("thead",null,h.map(((e,a)=>o.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{key:a}),e.headers.map((e=>o.createElement("th",Object.assign({},e.getHeaderProps(),{key:e.id}),e.render("Header")))))))),o.createElement("tbody",Object.assign({},P()),((g?y:x)||[]).map((e=>{v(e);return o.createElement(o.Fragment,{key:e.id},o.createElement("tr",Object.assign({key:e.id},e.getRowProps(),{className:(0,r.Z)({expanded:e.isExpanded})}),e.cells.map((e=>o.createElement("td",Object.assign({},e.getCellProps(),{key:e.column.id}),e.render("Cell"))))),e.isExpanded?o.createElement("tr",null,o.createElement("td",{colSpan:5,className:"jp-table-expanded-contents"},s({row:e}))):null)})),o.createElement("tr",null,!i&&a.length===0&&o.createElement("td",{colSpan:1e4},"No data available")))),g&&o.createElement(p,{pageSize:_,pageCount:N,gotoPage:k,canPreviousPage:C,previousPage:I,nextPage:j,canNextPage:w,pageIndex:R,pageOptions:z,setPageSize:O,loading:i,showPagination:G}))};const h=({url:e,columns:a,renderRowSubComponent:t,enableSearch:l})=>{const r=new URLSearchParams(window.location.search);const s=parseInt(r.get("index")||"0");const i=parseInt(r.get("size")||"25");const c=r.get("query")||"";const[g,p]=o.useState({data:[],dataSize:0,loading:false,pageIndex:s,pageSize:i,pageCount:0,query:c});const u=o.useRef(0);const d=o.useCallback((async({pageSize:a,pageIndex:t,query:l})=>{const r=++u.current;p(Object.assign(Object.assign({},g),{loading:true}));const o={skip:t*a,limit:a,q:l};let s="";for(const e of Object.keys(o)){if(o[e]){if(s.length){s+="&"}s+=e+"="+encodeURIComponent(o[e])}}const i=n.ServerConnection.makeSettings();const c=await n.ServerConnection.makeRequest(`${e}?${s}`,{},i);const d=await c.json();if(d&&r===u.current){E({pageIndex:t,pageSize:a,query:l});p({data:d.result,dataSize:d.pagination.all_records_count,loading:false,pageIndex:t,pageSize:a,pageCount:Math.ceil(d.pagination.all_records_count/a),query:l})}}),[]);return o.createElement(P,{columns:a,data:g.data,dataSize:g.dataSize,fetchData:d,renderRowSubComponent:t,loading:g.loading,paginated:true,pageIndex:g.pageIndex,pageSize:g.pageSize,pageCount:g.pageCount,enableSearch:l,query:g.query})}}}]);