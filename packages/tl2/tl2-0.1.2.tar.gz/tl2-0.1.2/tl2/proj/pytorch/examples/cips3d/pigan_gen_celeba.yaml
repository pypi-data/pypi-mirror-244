

nerf_cfg: &nerf_cfg
  shape_net_cfg:
    input_dim: 3
    hidden_dim: 256
    out_dim: 256
    N_layers: 8
  app_net_cfg:
    input_dim: 256
    hidden_dim: 256
    out_dim: 256
    N_layers: 1

mapping_shape_app_cfg: &mapping_shape_app_cfg
  base_cfg:
    z_dim: 256
    hidden_dim: 256
    N_layers: 3

inr_cfg: &inr_cfg
#  input_dim: 128
  hidden_dim: 512
  out_dim: 3
  style_dim: 512
  num_blocks: 9

mapping_inr_cfg: &mapping_inr_cfg
  z_dim: 512
  hidden_dim: 512
  base_layers: 8
  head_layers: 0
  add_norm: true
  norm_out: true


G_cfg_3D2D: &G_cfg_3D2D
  register_modules:
  - tl2_lib.tl2.proj.pytorch.examples.cips3d.pigan_gen_celeba
  name: tl2_lib.tl2.proj.pytorch.examples.cips3d.pigan_gen_celeba.Generator_Diffcam
  nerf_cfg: *nerf_cfg
  mapping_shape_app_cfg: *mapping_shape_app_cfg
  inr_cfg: *inr_cfg
  mapping_inr_cfg: *mapping_inr_cfg
  shape_block_end_index: 8
  app_block_end_index: 1
  inr_block_end_index: 9
  inr_detach: true


G_kwargs: &G_kwargs
  psi: 1.
  nerf_kwargs:
#    near: 0.3
#    far: 1.7
#    near: 0.5
#    far: 1.5
    near: 0.88
    far: 1.12
    N_samples: 12
    N_importance: 12
    raw_noise_std: 0. # 1.0
    eps: 1.e-10
    h_stddev: 0.3
    v_stddev: 0.155
    sample_dist: 'gaussian'


_build_generator:
  G_cfg: *G_cfg_3D2D
  G_kwargs: *G_kwargs
  cam_cfg:
    initial_fov: 12
    normalize_rays_d: true
